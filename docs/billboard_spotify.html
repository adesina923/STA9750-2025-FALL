<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="adesina923">

<title>What Aspects of a Song’s Quality Best Impact its Billboard Charting Success – STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea1d7ac60288e0f1efdbc993fd8432ae.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-339e78669bd22224b7cb5e9437fe940b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="site_libs/tabwid-1.1.3/tabwid.js"></script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Mini Project 0</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp01.html"> 
<span class="menu-text">Mini Project 1</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp02.html"> 
<span class="menu-text">Mini Project 2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp03.html"> 
<span class="menu-text">Mini Project 3</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp04.html"> 
<span class="menu-text">Mini Project 4</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./billboard_spotify.html" aria-current="page"> 
<span class="menu-text">Individual Report for Streaming Platforms</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./9750_SoundsGood_GroupReport_FINAL.html"> 
<span class="menu-text">Group Report for Streaming Platforms</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What Aspects of a Song’s Quality Best Impact its Billboard Charting Success</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>adesina923 </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Music has been said to pull at the heartstrings of the world. There are very few media that can connect people from different cultures, languages, and regions like music. The music industry, primarily in the United States, has changed dramatically due to the onset of streaming and the proliferation of multiple streaming platforms.</p>
<p><strong>The Billboard Hot 100</strong> has been widely regarded as one of the most important indicators of commercial success in popular music, as it captures which songs truly break through to mainstream audiences. Traditionally, chart performance reflected a combination of physical sales, radio airplay, and later, digital downloads, offering a snapshot of what the public was listening to at any given moment.</p>
<p>The rise of streaming has fundamentally reshaped this landscape. Platforms like <strong>Spotify</strong> and Apple Music have not only changed how listeners access music, but have also altered how success is measured. Streams, playlists, and algorithm-driven recommendations now play a key role in determining which songs climb the charts. As a result, the Billboard Hot 100 today reflects a complex but interesting dynamic between listener behavior, platform dynamics, and the intrinsic qualities of a song.</p>
<p>In this project, I aim to explore the latter and determine <strong>what aspects of a song’s musical profile are most strongly associated with its Billboard charting performance</strong>. Using Spotify song quality data that captures audio characteristics such as tempo, danceability, and energy, I analyze which features of a track are most predictive of its charting success. Ultimately, the goal is to better understand how the qualities of the music itself relate to commercial performance in the modern, streaming-dominated music industry.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"broom"</span>)) <span class="fu">install.packages</span>(<span class="st">"broom"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"flextable"</span>)) <span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"officer"</span>)) <span class="fu">install.packages</span>(<span class="st">"officer"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(officer)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="data-ingest" class="level2">
<h2 class="anchored" data-anchor-id="data-ingest">Data Ingest</h2>
<p>For this analysis I used two publicly available datasets.</p>
<section id="spotify-songs-analytics-dataset" class="level3">
<h3 class="anchored" data-anchor-id="spotify-songs-analytics-dataset">Spotify Songs Analytics Dataset</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"group_project"</span>))){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"group_project"</span>), <span class="at">showWarnings=</span><span class="cn">FALSE</span>, <span class="at">recursive=</span><span class="cn">TRUE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>Spotify_song_analytics_FILENAME <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"group_project"</span>, <span class="st">"Spotify song analytics dataset.csv"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(Spotify_song_analytics_FILENAME)){</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(<span class="st">'https://raw.githubusercontent.com/gabminamedez/spotify-data/refs/heads/master/data.csv'</span>, </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">destfile=</span>Spotify_song_analytics_FILENAME)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the Spotify data</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>sp_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(Spotify_song_analytics_FILENAME) <span class="sc">|&gt;</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># preview last 5 rows </span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>sp_raw_sneak_peak <span class="ot">&lt;-</span> sp_raw <span class="sc">|&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(year)) <span class="sc">|&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>id) <span class="sc">|&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">caption =</span> <span class="st">"Raw Spotify Songs Analytics Dataset - Last 5 Rows"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">options =</span> <span class="fu">list</span>(<span class="at">searching =</span> <span class="cn">FALSE</span>, <span class="at">info =</span> <span class="cn">FALSE</span>, <span class="at">pageLength =</span> <span class="dv">5</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>This dataset, posted by GitHub user <strong>gabminamedez</strong>, contains over 160K tracks from 1921-2020 found on Spotify as of June 2020. Each row corresponds to a single track, and contains basic information like the <strong>name</strong>, and <strong>duration</strong> of a track, the <strong>artists</strong> on it, and the <strong>year</strong> of release. What makes this dataset special, though, are the audio features it includes, most of which have been <strong>curated</strong>* by Spotify’s API.</p>
<blockquote class="blockquote">
<ul>
<li><strong>acousticness</strong>*: A confidence measure from 0.0 to 1.0 of whether the track is acoustic.</li>
<li><strong>danceability</strong>*: Describes how suitable a track is for dancing. A value of 0.0 is least danceable and 1.0 is most danceable.</li>
<li><strong>energy</strong>*: Energy is a measure from 0.0 to 1.0 and represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast and loud.</li>
<li><strong>instrumentalness</strong>*: Predicts whether a track contains no vocals.</li>
<li><strong>liveness</strong>*: Detects the presence of an audience in the recording.</li>
<li><strong>loudness</strong>*: The overall loudness of a track in decibels (dB).</li>
<li><strong>speechiness</strong>*: Detects the presence of spoken words in a track.</li>
<li><strong>tempo</strong>*: The overall estimated tempo of a track in beats per minute (BPM).</li>
<li><strong>valence</strong>*: A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track.</li>
<li>mode: Melodic content from the modality of a track. 1 = Major; 0 = Minor.</li>
<li>key: The estimated overall key of a track from the Pitch Class notation. E.g. 0 = C, 1 = C♯/D♭, 2 = D, and so on.</li>
<li>popularity: A track’s popularity, 0-100 where 100 is the most popular based on Spotify’s algorithm.</li>
<li>explicit: Whether or not the track has explicit lyrics. 1 = True; 0 = False.</li>
</ul>
</blockquote>
<p>Here is a preview of the last 5 rows in this dataset, before any cleaning or manipulation.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-abbb5599490d63e91da3" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-abbb5599490d63e91da3">{"x":{"filter":"none","vertical":false,"caption":"<caption>Raw Spotify Songs Analytics Dataset - Last 5 Rows<\/caption>","data":[["1","2","3","4","5"],["homecoming queen?","Honsool","Happy Does","Sad Forever","Como Llora"],["['Kelsea Ballerini']","['Agust D']","['Kenny Chesney']","['Lauv']","['Juanfran']"],[167796,219809,168733,203507,187500],["3/20/20","5/22/20","5/1/20","3/6/20","2/7/20"],[2020,2020,2020,2020,2020],[0.478,0.00036,0.301,0.468,0.183],[0.462,0.478,0.715,0.527,0.827],[0.512,0.574,0.665,0.538,0.629],[0,0.00719,0,0,0],[0.0993,0.157,0.123,0.0825,0.08400000000000001],[-5.443,-8.885999999999999,-5.486,-7.434,-3.966],[0.0334,0.0606,0.0381,0.104,0.185],[114.014,71.98399999999999,109.019,117.319,88.06399999999999],[0.29,0.187,0.593,0.389,0.486],[1,1,1,1,0],[9,1,6,5,6],[65,72,64,71,81],[0,1,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>artists<\/th>\n      <th>duration_ms<\/th>\n      <th>release_date<\/th>\n      <th>year<\/th>\n      <th>acousticness<\/th>\n      <th>danceability<\/th>\n      <th>energy<\/th>\n      <th>instrumentalness<\/th>\n      <th>liveness<\/th>\n      <th>loudness<\/th>\n      <th>speechiness<\/th>\n      <th>tempo<\/th>\n      <th>valence<\/th>\n      <th>mode<\/th>\n      <th>key<\/th>\n      <th>popularity<\/th>\n      <th>explicit<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[3,5,6,7,8,9,10,11,12,13,14,15,16,17,18]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"name","targets":1},{"name":"artists","targets":2},{"name":"duration_ms","targets":3},{"name":"release_date","targets":4},{"name":"year","targets":5},{"name":"acousticness","targets":6},{"name":"danceability","targets":7},{"name":"energy","targets":8},{"name":"instrumentalness","targets":9},{"name":"liveness","targets":10},{"name":"loudness","targets":11},{"name":"speechiness","targets":12},{"name":"tempo","targets":13},{"name":"valence","targets":14},{"name":"mode","targets":15},{"name":"key","targets":16},{"name":"popularity","targets":17},{"name":"explicit","targets":18}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
</section>
<section id="billboard-hot-100-dataset" class="level3">
<h3 class="anchored" data-anchor-id="billboard-hot-100-dataset">Billboard Hot 100 Dataset</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"group_project"</span>))){</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"group_project"</span>), <span class="at">showWarnings=</span><span class="cn">FALSE</span>, <span class="at">recursive=</span><span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Hot_100_FILENAME <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"group_project"</span>, <span class="st">"Hot 100.csv"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(Hot_100_FILENAME)){</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(<span class="st">"https://raw.githubusercontent.com/HipsterVizNinja/random-data/refs/heads/main/Music/hot-100/Hot%20100.csv"</span>, </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">destfile=</span>Hot_100_FILENAME)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the Billboard data</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>bb_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(Hot_100_FILENAME) <span class="sc">|&gt;</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># preview 1st 2015 Chart</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>bb_raw_sneak_peak <span class="ot">&lt;-</span> bb_raw <span class="sc">|&gt;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chart_date <span class="sc">==</span> <span class="st">'2015-01-03'</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>chart_url) <span class="sc">|&gt;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(chart_position) <span class="sc">|&gt;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">caption =</span> <span class="st">"Raw Billboard Hot 100 Chart - January 3rd 2015"</span>,</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">options =</span> <span class="fu">list</span>(<span class="at">searching =</span> <span class="cn">FALSE</span>, <span class="at">info =</span> <span class="cn">FALSE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>This dataset, posted by GitHub user <strong>HipsterVizNinja</strong>, is a complete historical record of every Billboard Hot 100 chart, from 1958 to August 2025. Unlike our Spotify dataset, each row does not correspond to a single track, since a song can have many entries on the charts. The columns of this dataset are defined as follows:</p>
<blockquote class="blockquote">
<ul>
<li><strong>chart_position</strong>: The position of the song for the given chart date.</li>
<li><strong>chart_date</strong>: The date that the chart was released.</li>
<li><strong>song</strong>: The name of the song.</li>
<li><strong>performer</strong>: The performer of the song.</li>
<li><strong>song_id</strong>: A concatenation of song and performer to create a unique identifier.</li>
<li><strong>instance</strong>: Counts how many times a song_id has returned to the chart after more than 1 week off the chart.</li>
<li><strong>time_on_chart</strong>: Running count of weeks (all-time) a song_id has been on the chart.</li>
<li><strong>consecutive_weeks</strong>: For the given instance, how many weeks the song_id has been on the chart consecutively; NULL indicates the start of a new instance.</li>
<li><strong>previous_week</strong>: For the given instance, the chart_position for the previous week.</li>
<li><strong>peak_position</strong>: The all-time best/peak position for a song_id.</li>
<li><strong>worst_position</strong>: The all-time worst/lowest position for a song_id.</li>
<li><strong>chart_debut</strong>: The date of the first initial instance for a song_id.</li>
<li><strong>chart_url</strong>: URL to the chart on Billboard.com.</li>
</ul>
</blockquote>
<p>Here is a preview of the full chart from the first week of January 2015, before any cleaning or manipulation</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-94466abcf3e1b6272c24" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-94466abcf3e1b6272c24">{"x":{"filter":"none","vertical":false,"caption":"<caption>Raw Billboard Hot 100 Chart - January 3rd 2015<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],["2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03","2015-01-03"],["Blank Space","Take Me To Church","Uptown Funk!","Thinking Out Loud","Lips Are Movin","I'm Not The Only One","Love Me Harder","Jealous","Animals","All About That Bass","Shake It Off","I Don't F**k With You","The Heart Wants What It Wants","Wasted Love","Only","Habits (Stay High)","Tuesday","Waves","Don't","Centuries","The Hanging Tree","Bang Bang","No Type","7/11","Hot Boy","Blame","Stay With Me","CoCo","Beg For It","Don't Tell 'Em","I Don't Mind","Riptide","Black Widow","My Baby's Got A Smile On Her Face","All I Want For Christmas Is You","Heroes (We Could Be)","Trumpets","Shotgun Rider","Stolen Dance","Chandelier","Something In The Water","Santa Tell Me","Feeling Myself","Lifestyle","Rather Be","Try Me","Ghost","Anaconda","Rude","Night Changes","Talladega","Touchin, Lovin","Velvet","Hold You Down","L.A.LOVE (la la)","About The Money","Sun Daze","Mary, Did You Know?","Perfect Storm","I Bet My Life","I See You","Bed Of Lies","Lost Without U","I Lived","Masterpiece","Lonely Tonight","Til It's Gone","Dangerous","Prayer In C","Steal My Girl","Close Your Eyes","Drinking Class","Just Gettin' Started","Soldier","Sledgehammer","Make Me Wanna","G.D.F.R.","God Made Girls","She Knows","Somewhere In My Car","Often","Mean To Me","Lost Stars","Girl In A Country Song","Try","Shut Up And Dance","Time Of Our Lives","Get On Your Knees","***Flawless","Apparently","Like A Cowboy","Body Language","No Love","Break The Rules","Lonely Eyes","Fireball","Homegrown Honey","Wet Dreamz","Yellow Flicker Beat","In Your Arms"],["Taylor Swift","Hozier","Mark Ronson Featuring Bruno Mars","Ed Sheeran","Meghan Trainor","Sam Smith","Ariana Grande &amp; The Weeknd","Nick Jonas","Maroon 5","Meghan Trainor","Taylor Swift","Big Sean Featuring E-40","Selena Gomez","Matt McAndrew","Nicki Minaj Featuring Drake, Lil Wayne &amp; Chris Brown","Tove Lo","I LOVE MAKONNEN Featuring Drake","Mr. Probz","Ed Sheeran","Fall Out Boy","James Newton Howard Featuring Jennifer Lawrence","Jessie J, Ariana Grande &amp; Nicki Minaj","Rae Sremmurd","Beyonce","Bobby Shmurda","Calvin Harris Featuring John Newman","Sam Smith","O.T. Genasis","Iggy Azalea Featuring M0","Jeremih Featuring YG","Usher Featuring Juicy J","Vance Joy","Iggy Azalea Featuring Rita Ora","Craig Wayne Boyd","Mariah Carey","Alesso Featuring Tove Lo","Jason Derulo","Tim McGraw","Milky Chance","Sia","Carrie Underwood","Ariana Grande","Nicki Minaj Featuring Beyonce","Rich Gang Featuring Young Thug &amp; Rich Homie Quan","Clean Bandit Featuring Jess Glynne","DeJ Loaf","Ella Henderson","Nicki Minaj","MAGIC!","One Direction","Eric Church","Trey Songz Featuring Nicki Minaj","Chris Jamison","DJ Khaled Featuring Chris Brown, August Alsina, Future &amp; Jeremih","Fergie","T.I. Featuring Young Thug","Florida Georgia Line","Pentatonix","Brad Paisley","Imagine Dragons","Luke Bryan","Nicki Minaj Featuring Skylar Grey","Chris Jamison &amp; Adam Levine","OneRepublic","Jessie J","Blake Shelton Featuring Ashley Monroe","Kenny Chesney","David Guetta Featuring Sam Martin","Lillywood &amp; Robin Schulz","One Direction","Parmalee","Lee Brice","Jason Aldean","Damien","Fifth Harmony","Thomas Rhett","Flo Rida Featuring Sage The Gemini &amp; Lookas","RaeLynn","Ne-Yo Featuring Juicy J","Keith Urban","The Weeknd","Brett Eldredge","Matt McAndrew &amp; Adam Levine","Maddie &amp; Tae","Colbie Caillat","WALK THE MOON","Pitbull &amp; Ne-Yo","Nicki Minaj Featuring Ariana Grande","Beyonce Featuring Nicki Minaj Or Chimamanda Ngozi Adichie","J. Cole","Randy Houser","Kid Ink Featuring Usher &amp; Tinashe","August Alsina","Charli XCX","Chris Young","Pitbull Featuring John Ryan","Darius Rucker","J. Cole","Lorde","Nico &amp; Vinz"],["Blank SpaceTaylor Swift","Take Me To ChurchHozier","Uptown Funk!Mark Ronson Featuring Bruno Mars","Thinking Out LoudEd Sheeran","Lips Are MovinMeghan Trainor","I'm Not The Only OneSam Smith","Love Me HarderAriana Grande &amp; The Weeknd","JealousNick Jonas","AnimalsMaroon 5","All About That BassMeghan Trainor","Shake It OffTaylor Swift","I Don't F**k With YouBig Sean Featuring E-40","The Heart Wants What It WantsSelena Gomez","Wasted LoveMatt McAndrew","OnlyNicki Minaj Featuring Drake, Lil Wayne &amp; Chris Brown","Habits (Stay High)Tove Lo","TuesdayI LOVE MAKONNEN Featuring Drake","WavesMr. Probz","Don'tEd Sheeran","CenturiesFall Out Boy","The Hanging TreeJames Newton Howard Featuring Jennifer Lawrence","Bang BangJessie J, Ariana Grande &amp; Nicki Minaj","No TypeRae Sremmurd","7/11Beyonce","Hot BoyBobby Shmurda","BlameCalvin Harris Featuring John Newman","Stay With MeSam Smith","CoCoO.T. Genasis","Beg For ItIggy Azalea Featuring M0","Don't Tell 'EmJeremih Featuring YG","I Don't MindUsher Featuring Juicy J","RiptideVance Joy","Black WidowIggy Azalea Featuring Rita Ora","My Baby's Got A Smile On Her FaceCraig Wayne Boyd","All I Want For Christmas Is YouMariah Carey","Heroes (We Could Be)Alesso Featuring Tove Lo","TrumpetsJason Derulo","Shotgun RiderTim McGraw","Stolen DanceMilky Chance","ChandelierSia","Something In The WaterCarrie Underwood","Santa Tell MeAriana Grande","Feeling MyselfNicki Minaj Featuring Beyonce","LifestyleRich Gang Featuring Young Thug &amp; Rich Homie Quan","Rather BeClean Bandit Featuring Jess Glynne","Try MeDeJ Loaf","GhostElla Henderson","AnacondaNicki Minaj","RudeMAGIC!","Night ChangesOne Direction","TalladegaEric Church","Touchin, LovinTrey Songz Featuring Nicki Minaj","VelvetChris Jamison","Hold You DownDJ Khaled Featuring Chris Brown, August Alsina, Future &amp; Jeremih","L.A.LOVE (la la)Fergie","About The MoneyT.I. Featuring Young Thug","Sun DazeFlorida Georgia Line","Mary, Did You Know?Pentatonix","Perfect StormBrad Paisley","I Bet My LifeImagine Dragons","I See YouLuke Bryan","Bed Of LiesNicki Minaj Featuring Skylar Grey","Lost Without UChris Jamison &amp; Adam Levine","I LivedOneRepublic","MasterpieceJessie J","Lonely TonightBlake Shelton Featuring Ashley Monroe","Til It's GoneKenny Chesney","DangerousDavid Guetta Featuring Sam Martin","Prayer In CLillywood &amp; Robin Schulz","Steal My GirlOne Direction","Close Your EyesParmalee","Drinking ClassLee Brice","Just Gettin' StartedJason Aldean","SoldierDamien","SledgehammerFifth Harmony","Make Me WannaThomas Rhett","G.D.F.R.Flo Rida Featuring Sage The Gemini &amp; Lookas","God Made GirlsRaeLynn","She KnowsNe-Yo Featuring Juicy J","Somewhere In My CarKeith Urban","OftenThe Weeknd","Mean To MeBrett Eldredge","Lost StarsMatt McAndrew &amp; Adam Levine","Girl In A Country SongMaddie &amp; Tae","TryColbie Caillat","Shut Up And DanceWALK THE MOON","Time Of Our LivesPitbull &amp; Ne-Yo","Get On Your KneesNicki Minaj Featuring Ariana Grande","***FlawlessBeyonce Featuring Nicki Minaj Or Chimamanda Ngozi Adichie","ApparentlyJ. Cole","Like A CowboyRandy Houser","Body LanguageKid Ink Featuring Usher &amp; Tinashe","No LoveAugust Alsina","Break The RulesCharli XCX","Lonely EyesChris Young","FireballPitbull Featuring John Ryan","Homegrown HoneyDarius Rucker","Wet DreamzJ. Cole","Yellow Flicker BeatLorde","In Your ArmsNico &amp; Vinz"],[1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,3,1,2,1,1,1,1,2,2,2,2,1,2,1,1,1,1,1,1,1,2,1,2,1],[8,19,6,11,9,16,11,15,18,24,18,13,7,1,8,30,13,18,28,15,4,21,13,4,21,15,37,5,9,26,5,26,25,1,10,12,30,12,22,33,12,4,1,23,28,9,8,20,35,5,9,16,1,16,11,20,9,5,11,7,4,4,1,4,1,3,8,9,3,12,13,10,4,1,4,6,6,9,5,17,10,7,1,20,18,6,2,1,13,1,3,11,14,2,1,20,4,2,7,10],[8,19,6,11,9,15,11,15,18,24,18,13,7,1,8,30,13,18,28,15,4,21,13,4,21,15,36,5,9,26,5,26,25,1,3,12,30,12,22,33,12,4,1,23,28,9,8,20,35,5,9,16,1,16,11,20,8,5,11,5,4,1,1,4,1,3,8,9,3,12,13,10,3,1,4,6,3,9,4,17,10,7,1,19,16,4,1,1,4,1,3,11,14,2,1,20,2,2,6,10],[1,2,3,6,4,5,9,11,8,7,10,14,13,null,12,15,16,18,17,26,23,19,22,20,24,21,25,27,28,29,37,32,30,null,40,35,31,39,42,34,38,64,null,33,36,45,57,55,43,53,51,47,null,44,41,50,58,48,52,63,61,null,null,67,null,54,68,60,79,70,69,72,84,null,94,80,87,71,85,65,74,82,null,62,77,83,null,null,75,null,91,92,78,100,null,88,97,73,86,89],[1,2,3,4,4,5,7,8,3,1,1,11,6,14,12,3,12,14,9,20,12,3,16,13,6,19,2,27,28,6,31,32,3,34,21,35,14,38,39,8,24,42,43,16,10,45,47,2,1,31,51,43,53,39,27,42,57,26,52,53,61,62,63,64,65,54,67,56,69,13,69,72,61,74,75,76,77,61,79,49,74,82,83,54,55,75,87,88,41,90,91,78,69,94,95,23,97,73,34,72],[18,96,65,84,93,93,79,80,86,84,11,78,26,14,54,73,90,88,91,55,23,22,77,24,96,38,93,77,92,89,95,92,97,34,83,89,89,97,95,75,63,92,43,89,97,67,94,55,97,55,90,95,53,98,97,99,95,60,85,89,89,85,63,78,65,95,100,96,87,70,98,99,94,74,99,99,98,98,100,91,99,97,83,84,95,98,94,88,89,90,98,100,93,100,95,96,97,98,99,100],["2014-11-15","2014-08-30","2014-11-29","2014-10-25","2014-11-08","2014-06-21","2014-10-25","2014-09-27","2014-09-06","2014-07-26","2014-09-06","2014-10-11","2014-11-22","2015-01-03","2014-11-15","2014-06-14","2014-10-11","2014-09-06","2014-06-28","2014-09-27","2014-12-13","2014-08-16","2014-10-11","2014-12-13","2014-08-16","2014-09-27","2014-04-19","2014-12-06","2014-11-08","2014-07-12","2014-12-06","2014-07-12","2014-07-19","2015-01-03","2000-01-08","2014-10-18","2014-06-14","2014-10-18","2014-08-09","2014-05-24","2014-10-18","2014-12-13","2015-01-03","2014-08-02","2014-06-28","2014-11-08","2014-11-15","2014-08-23","2014-05-10","2014-12-06","2014-11-08","2014-09-20","2015-01-03","2014-09-20","2014-10-25","2014-08-23","2014-10-04","2014-12-06","2014-10-25","2014-11-15","2014-12-13","2014-12-06","2015-01-03","2014-12-13","2015-01-03","2014-12-20","2014-11-15","2014-11-08","2014-12-20","2014-10-18","2014-10-11","2014-11-01","2014-10-18","2015-01-03","2014-12-13","2014-11-29","2014-11-08","2014-11-08","2014-11-29","2014-09-13","2014-11-01","2014-11-22","2015-01-03","2014-08-16","2014-07-26","2014-11-22","2014-12-13","2015-01-03","2014-09-13","2015-01-03","2014-12-20","2014-10-25","2014-10-04","2014-12-27","2015-01-03","2014-08-23","2014-11-22","2014-12-27","2014-10-18","2014-11-01"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>chart_position<\/th>\n      <th>chart_date<\/th>\n      <th>song<\/th>\n      <th>performer<\/th>\n      <th>song_id<\/th>\n      <th>instance<\/th>\n      <th>time_on_chart<\/th>\n      <th>consecutive_weeks<\/th>\n      <th>previous_week<\/th>\n      <th>peak_position<\/th>\n      <th>worst_position<\/th>\n      <th>chart_debut<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,6,7,8,9,10,11]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"chart_position","targets":1},{"name":"chart_date","targets":2},{"name":"song","targets":3},{"name":"performer","targets":4},{"name":"song_id","targets":5},{"name":"instance","targets":6},{"name":"time_on_chart","targets":7},{"name":"consecutive_weeks","targets":8},{"name":"previous_week","targets":9},{"name":"peak_position","targets":10},{"name":"worst_position","targets":11},{"name":"chart_debut","targets":12}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<p>At this point, we have downloaded our two datasets from which we will conduct analysis. From our Spotify Songs Analytics Dataset, we have popular songs from 1921-2020, with associated audio features for them all. Our Billboard Hot 100 dataset presents us with a trustworthy, historical record of charting information, and with charts going as far back as 1958, we have more than enough coverage to take our analysis in any which way we please.</p>
</section>
</section>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>In order to suitably join the two datasets together and begin answering our core question of what audio features best impact a song’s charting success, data cleaning is required.</p>
<p>I opted to only look at the charts from <strong>2015-2019</strong>. This time period is representative of the music streaming-era boom, when the industry was transformed from physical/download sales to a subscription-based model dominated by services like <strong>Spotify</strong>, which <strong>hit 100 million paid subscribers in 2019</strong>. Looking at songs that charted in this time period ensured that I had a good sample to construct my analysis from.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># choose the 2015 - 2019 window for the billboard data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>yr_min <span class="ot">&lt;-</span> <span class="dv">2015</span>; yr_max <span class="ot">&lt;-</span> <span class="dv">2019</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>bb_win <span class="ot">&lt;-</span> bb_raw <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">chart_date =</span> <span class="fu">ymd</span>(chart_date)) <span class="sc">|&gt;</span>                 <span class="co"># parse to Date</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chart_date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(yr_min, <span class="st">"-01-01"</span>)),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         chart_date <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(yr_max, <span class="st">"-12-31"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Since my goal was to join the Billboard data from 2015-2019 to the Spotify Songs Analytics Dataset, a large part of my cleaning centered around creating a suitable <strong>join key</strong>. After inspecting both datasets, I decided that I would join the two datasets using a <strong>concatenated song title and primary song artist key</strong>. To do this, I had to extract the primary artist for each song of both the Spotify and Billboard datasets, and clean the song titles in both datasets to make sure that there would be a clean, one-to-one join.</p>
<p>Billboard’s <strong>‘performer’</strong> field often includes featured artists, nicknames in quotes, and collaboration separators (e.g., “feat.”, “x”, “+”). My <strong>primary_artist_billboard() function</strong> solves this problem, standardizing ‘performer’ to a single, canonical primary artist before forming the key.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Extract the *primary* artist from Billboard's 'performer' field</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for your 2015–2019 window. Rules:</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Remove quoted nicknames entirely (e.g., Missy "Misdemeanor" Elliott → missy elliott).</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Cut anything after collab keywords: featuring/feat/ft/with.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Cut at the first '&amp;' (primary artist appears before it).</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  - For commas, *preserve stylistic monikers* like "Tyler, The Creator";</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#    otherwise cut at the first comma.</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Cut after ' x ' / ' + ' only when the separator is followed by a letter</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#    (true collab separator). This avoids breaking "Lil Nas X &amp; …" and "X Ambassadors".</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Keep Unicode letters/digits, spaces, apostrophes, commas, '$', and '!' (e.g., A$AP, Travi$, P!nk).</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Tidy stray punctuation and whitespace; return a clean, join-ready primary name.</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>primary_artist_billboard <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (0) lowercase everything for consistent matching</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(x)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (1) drop quoted nicknames entirely:  Missy "Misdemeanor" Elliott -&gt; missy elliott</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="fu">regex</span>(<span class="st">'("([^"]+)")|“([^”]+)”'</span>), <span class="st">" "</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (2) normalize apostrophes and remove any stray double-quote characters</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[‘’`]"</span>, <span class="st">"'"</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">'["“”]'</span>, <span class="st">""</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (3) cut after collab keywords (featuring/feat/ft/with)</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     e.g., "a$ap rocky featuring ..." -&gt; "a$ap rocky"</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(x, <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b(feat</span><span class="sc">\\</span><span class="st">.?|featuring|ft</span><span class="sc">\\</span><span class="st">.?|with)</span><span class="sc">\\</span><span class="st">b.*$"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>), <span class="st">" "</span>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (4a) cut after ampersand: "sam smith &amp; normani" -&gt; "sam smith"</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">s*&amp;.*$"</span>, <span class="st">" "</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (4b) commas: keep stylistic monikers like "tyler, the creator"; else cut at first comma</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  keep_moniker <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(x, <span class="fu">regex</span>(<span class="st">"^[^,&amp;]+,</span><span class="sc">\\</span><span class="st">s*(the|da|el|la)</span><span class="sc">\\</span><span class="st">b"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  x[<span class="sc">!</span>keep_moniker] <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(x[<span class="sc">!</span>keep_moniker], <span class="st">",.*$"</span>, <span class="st">" "</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (5) cut after ' x ' / ' + ' ONLY when followed by a letter (true collab separator)</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     - keeps "lil nas x &amp; cardi b" (next char after ' x ' is '&amp;' -&gt; not a letter)</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     - keeps "x ambassadors" (no leading space before 'x')</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     - splits "the black eyed peas X j balvin"</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(x, <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s[+x]</span><span class="sc">\\</span><span class="st">s(?=</span><span class="sc">\\</span><span class="st">p{L}).*$"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>), <span class="st">" "</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (6) allow: letters/digits, spaces, apostrophes, commas, '$', and '!' (A$AP, Travi$, P!nk)</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[^</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}', !</span><span class="sc">\\</span><span class="st">$]"</span>, <span class="st">" "</span>)</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     normalize comma spacing (e.g., "tyler,   the creator" -&gt; "tyler, the creator")</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">s*,</span><span class="sc">\\</span><span class="st">s*"</span>, <span class="st">", "</span>)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (7) trim stray apostrophes and stray exclamation marks (not between letters/digits)</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;!</span><span class="sc">\\</span><span class="st">p{L})'(?!</span><span class="sc">\\</span><span class="st">p{L})"</span>, <span class="st">" "</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])!(?![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])"</span>, <span class="st">" "</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (8) collapse extra whitespace and return</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(x)</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>On the Spotify side, the <strong>‘artists’</strong> field is stored as a list-like string (e.g., [‘Post Malone’, ‘Swae Lee’]), so I first use the <strong>parse_spotify_artists() function</strong> to correctly split that string into individual artist names without breaking names that contain commas (e.g., “Tyler, The Creator”). I then apply the <strong>clean_artist_name() function</strong> to the Spotify data to normalize each artist (lowercasing, standardizing punctuation, and preserving meaningful characters like commas, $ in A$AP, and ! in P!nk).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse Spotify's artists column like:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "['Post Malone', 'Swae Lee']"  --&gt; c("Post Malone","Swae Lee")</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps commas inside names: "['Tyler, The Creator']" stays one element.</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>parse_spotify_artists <span class="ot">&lt;-</span> <span class="cf">function</span>(s) {</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(s) <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="fu">list</span>(<span class="fu">character</span>()))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove outer [ ... ]</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  core <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(s, <span class="st">"^</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">s*"</span>) <span class="sc">|&gt;</span> <span class="fu">str_remove</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">]</span><span class="sc">\\</span><span class="st">s*$"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(core) <span class="sc">||</span> core <span class="sc">==</span> <span class="st">""</span>) <span class="fu">return</span>(<span class="fu">list</span>(<span class="fu">character</span>()))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split on the boundary between quoted elements:  '...'&lt;comma&gt;'...'</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  parts <span class="ot">&lt;-</span> <span class="fu">str_split</span>(core, <span class="st">"</span><span class="sc">\\</span><span class="st">s*'</span><span class="sc">\\</span><span class="st">s*,</span><span class="sc">\\</span><span class="st">s*'"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># strip the leading/trailing single quotes around each element (if present)</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  parts <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(parts, <span class="st">"^</span><span class="sc">\\</span><span class="st">s*'"</span>) <span class="sc">|&gt;</span> <span class="fu">str_remove</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">'</span><span class="sc">\\</span><span class="st">s*$"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  parts <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(parts)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(parts)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean artist name (Spotify), preserving things we need:</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># - lowercase, Unicode letters/digits, spaces, apostrophes, dollar sign, and commas</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>clean_artist_name <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(x)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[‘’`]"</span>, <span class="st">"'"</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># allow letters/digits, spaces, apostrophes, comma, $, and **!**</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[^</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}', !</span><span class="sc">\\</span><span class="st">$]"</span>, <span class="st">" "</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">s*,</span><span class="sc">\\</span><span class="st">s*"</span>, <span class="st">", "</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop apostrophes not between letters; drop ! not between letters/digits</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;!</span><span class="sc">\\</span><span class="st">p{L})'(?!</span><span class="sc">\\</span><span class="st">p{L})"</span>, <span class="st">" "</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])!(?![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])"</span>, <span class="st">" "</span>)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_squish</span>(x)</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>To align song titles across sources, I applied the <strong>normalize_title() function</strong> to both the Billboard and Spotify datasets. The function lowercases and folds accents (Beyoncé -&gt; beyonce), standardizes quotes while keeping in-word apostrophes, removes double quotes and dots in acronyms (G.D.F.R. -&gt; gdfr), and strips collaboration tags ((feat…) or “– feat …”) and common edit/version suffixes (“– remix”, “– radio edit”). It preserves meaningful characters like $ and ! when they’re part of a song’s title (A$AP Forever), removes non-semantic punctuation, and collapses whitespace.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Canonicalize song titles into a join-friendly form while preserving</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># meaningful symbols that appear *inside* titles, specifically $ and !.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Lowercases and folds accents</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Keeps letters, digits, spaces, in-word apostrophes, and now $/!</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Removes only collab tags ((feat/with …), "- feat …"), and edit/version suffixes</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># - Collapses whitespace</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>normalize_title <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(x)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 0) Fold accents so Ü→u, beyoncé→beyonce (helps BB vs Spotify)</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(x, <span class="st">"Latin-ASCII"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1) Unify quotes/apostrophes; drop double quotes</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[‘’`]"</span>, <span class="st">"'"</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">'["“”]'</span>, <span class="st">""</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2) Remove dots in acronyms so g.d.f.r. == gdfr</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 3) Drop parenthetical/bracketed collab pieces ONLY (feat/with)</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    x,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">((</span><span class="sc">\\</span><span class="st">s*(feat</span><span class="sc">\\</span><span class="st">.?|featuring|ft</span><span class="sc">\\</span><span class="st">.?|with)</span><span class="sc">\\</span><span class="st">b[^)]*)</span><span class="sc">\\</span><span class="st">)"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">" "</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    x,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[(</span><span class="sc">\\</span><span class="st">s*(feat</span><span class="sc">\\</span><span class="st">.?|featuring|ft</span><span class="sc">\\</span><span class="st">.?|with)</span><span class="sc">\\</span><span class="st">b[^</span><span class="sc">\\</span><span class="st">]]*)</span><span class="sc">\\</span><span class="st">]"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">" "</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 4) Drop dash-based collab tags: " - feat/featuring/ft/with ..."</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    x,</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s-</span><span class="sc">\\</span><span class="st">s(feat</span><span class="sc">\\</span><span class="st">.?|featuring|ft</span><span class="sc">\\</span><span class="st">.?|with)</span><span class="sc">\\</span><span class="st">b.*$"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">" "</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 5) Drop common edit/version suffixes after a dash (keep the core title)</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>    x,</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s-</span><span class="sc">\\</span><span class="st">s(remix|radio edit|remastered|single version|original mix|edit|mono|stereo|acoustic|live|instrumental|version|from</span><span class="sc">\\</span><span class="st">b.*)$"</span>,</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>          <span class="at">ignore_case =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">" "</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 6) Keep any remaining ()/[] content (e.g., (da shine)) but remove the brackets themselves</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[</span><span class="sc">\\</span><span class="st">(</span><span class="sc">\\</span><span class="st">)</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">]]"</span>, <span class="st">" "</span>)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 7) Allow letters/digits/spaces/apostrophes/**$/**!; drop other punctuation</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"[^</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}' !$]"</span>, <span class="st">" "</span>)</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 8) Drop apostrophes that aren’t between letters (keep in "can't")</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;!</span><span class="sc">\\</span><span class="st">p{L})'(?!</span><span class="sc">\\</span><span class="st">p{L})"</span>, <span class="st">" "</span>)</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 9) Drop $ or ! when they’re *not* adjacent to a letter/digit (keeps A$AP / !!! etc.)</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])</span><span class="sc">\\</span><span class="st">$(?![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])"</span>, <span class="st">" "</span>)</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(x, <span class="st">"(?&lt;![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])!(?![</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{N}])"</span>, <span class="st">" "</span>)</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 10) Squash whitespace</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(x)</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>After cleaning the Spotify artist names, I split the artists across multiple rows so that each song has a row for each artist associated with it, and created the join key in that dataset for each row. Here is an example of this for the song “Bartier Cardi” by Cardi B, featuring 21 Savage.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">################# Spotify manipulation (1 row per song per artist)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1) audio columns </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  audio_cols <span class="ot">&lt;-</span> <span class="fu">intersect</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"acousticness"</span>,<span class="st">"danceability"</span>,<span class="st">"energy"</span>,<span class="st">"instrumentalness"</span>,<span class="st">"liveness"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"loudness"</span>,<span class="st">"speechiness"</span>,<span class="st">"tempo"</span>,<span class="st">"valence"</span>,<span class="st">"mode"</span>,<span class="st">"key"</span>,<span class="st">"explicit"</span>,<span class="st">"duration_ms"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(sp_raw)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2) Expand to one row per (track, artist) and build a Spotify-side join key</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  sp_long <span class="ot">&lt;-</span> sp_raw <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">song_clean_sp =</span> <span class="fu">normalize_title</span>(name),                          <span class="co"># cleaned title</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">artists_list  =</span> <span class="fu">lapply</span>(artists, <span class="cf">function</span>(s) <span class="fu">parse_spotify_artists</span>(s)[[<span class="dv">1</span>]])</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest_longer</span>(artists_list, <span class="at">values_to =</span> <span class="st">"artist_one_raw"</span>, <span class="at">keep_empty =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>  <span class="co"># one row per artist</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">artist_clean_sp =</span> <span class="fu">clean_artist_name</span>(artist_one_raw),            <span class="co"># cleaned single artist</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">join_key_sp     =</span> <span class="fu">paste</span>(song_clean_sp, artist_clean_sp, <span class="at">sep =</span> <span class="st">"|"</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># drop empties/bad keys</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(song_clean_sp) <span class="sc">&amp;</span> song_clean_sp <span class="sc">!=</span> <span class="st">""</span>,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(artist_clean_sp) <span class="sc">&amp;</span> artist_clean_sp <span class="sc">!=</span> <span class="st">""</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># keep useful columns up front (id/name/artists for reference, audio features for modeling)</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>      join_key_sp, song_clean_sp, artist_clean_sp,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>      id, name, artists, artist_one_raw, popularity,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_of</span>(audio_cols),</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">everything</span>()</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="co"># spotify cleaned key example  </span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>sp_long_join_key_ex <span class="ot">&lt;-</span> sp_long <span class="sc">|&gt;</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">'Bartier Cardi (feat. 21 Savage)'</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, song_clean_sp, artists, artist_one_raw, artist_clean_sp, join_key_sp) <span class="sc">|&gt;</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>() </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-cf8779a2003826c6863d" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-cf8779a2003826c6863d">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["Bartier Cardi (feat. 21 Savage)","Bartier Cardi (feat. 21 Savage)"],["bartier cardi","bartier cardi"],["['Cardi B', '21 Savage']","['Cardi B', '21 Savage']"],["Cardi B","21 Savage"],["cardi b","21 savage"],["bartier cardi|cardi b","bartier cardi|21 savage"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>song_clean_sp<\/th>\n      <th>artists<\/th>\n      <th>artist_one_raw<\/th>\n      <th>artist_clean_sp<\/th>\n      <th>join_key_sp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"name","targets":1},{"name":"song_clean_sp","targets":2},{"name":"artists","targets":3},{"name":"artist_one_raw","targets":4},{"name":"artist_clean_sp","targets":5},{"name":"join_key_sp","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<p>Here is that same song, as it is cleaned and a join key is created for it in the Billboard dataset.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Manual one-off fixes on Billboard (applied BEFORE building bb_keys) ---</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bb_win <span class="ot">&lt;-</span> bb_win <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fix #1 — Cardi B: canonicalize the title so it matches Spotify</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Some Billboard rows show "Bodak Yellow (Money Moves)"; we want just "Bodak Yellow"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">song =</span> <span class="fu">if_else</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(performer), <span class="st">"^cardi b$"</span>) <span class="sc">&amp;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(song), <span class="st">"^bodak yellow"</span>),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Bodak Yellow"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>      song</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fix #2 — John &amp; Yoko credit: align primary artist with Spotify</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Billboard credits like "John &amp; Yoko/The Plastic Ono Band With The Harlem Community Choir"</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># I reduce to "john" via the primary-artist cleaner. For the classic single</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "Happy Xmas (War Is Over)", set performer = "John Lennon" so the cleaned artist becomes "john lennon".</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">performer =</span> <span class="fu">if_else</span>(</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(song), <span class="st">"^happy xmas </span><span class="sc">\\</span><span class="st">(war is over</span><span class="sc">\\</span><span class="st">)$"</span>) <span class="sc">&amp;</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(performer), <span class="st">"^john</span><span class="sc">\\</span><span class="st">s*&amp;</span><span class="sc">\\</span><span class="st">s*yoko"</span>),</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">"John Lennon"</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>      performer</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>bb_keys <span class="ot">&lt;-</span> bb_win <span class="sc">|&gt;</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">song_clean_bb   =</span> <span class="fu">normalize_title</span>(song),</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">artist_clean_bb =</span> <span class="fu">primary_artist_billboard</span>(performer),</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">join_key_bb     =</span> <span class="fu">paste</span>(song_clean_bb, artist_clean_bb, <span class="at">sep =</span> <span class="st">"|"</span>)</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop any empties to avoid junk keys</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(song_clean_bb), song_clean_bb <span class="sc">!=</span> <span class="st">""</span>,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(artist_clean_bb), artist_clean_bb <span class="sc">!=</span> <span class="st">""</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co"># example of cleaned keys BB</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>bb_keys_example <span class="ot">&lt;-</span> bb_keys <span class="sc">|&gt;</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(song <span class="sc">==</span> <span class="st">"Bartier Cardi"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(song, performer, song_clean_bb, artist_clean_bb, join_key_bb) <span class="sc">|&gt;</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-3dd7fca072150ac956da" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-3dd7fca072150ac956da">{"x":{"filter":"none","vertical":false,"data":[["1"],["Bartier Cardi"],["Cardi B Featuring 21 Savage"],["bartier cardi"],["cardi b"],["bartier cardi|cardi b"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>song<\/th>\n      <th>performer<\/th>\n      <th>song_clean_bb<\/th>\n      <th>artist_clean_bb<\/th>\n      <th>join_key_bb<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"song","targets":1},{"name":"performer","targets":2},{"name":"song_clean_bb","targets":3},{"name":"artist_clean_bb","targets":4},{"name":"join_key_bb","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<p>I collapsed Billboard’s weekly charts to one row per cleaned title + primary artist within the 2015–2019 window so that each song contributes a single, interpretable popularity target aligned with Spotify’s track-level features. For each song–artist pair, I computed:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>bb_song <span class="ot">&lt;-</span> bb_keys <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(join_key_bb, song_clean_bb, artist_clean_bb) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># core outcomes for the model against Spotify features</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">peak_position_window   =</span> <span class="fu">min</span>(chart_position, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">worst_position_window  =</span> <span class="fu">max</span>(chart_position, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_position_window   =</span> <span class="fu">mean</span>(chart_position, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_on_chart_window  =</span> <span class="fu">n_distinct</span>(chart_date),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_top10            =</span> <span class="fu">sum</span>(chart_position <span class="sc">&lt;=</span> <span class="dv">10</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_top40            =</span> <span class="fu">sum</span>(chart_position <span class="sc">&lt;=</span> <span class="dv">40</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_chart_window     =</span> <span class="fu">min</span>(chart_date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_chart_window      =</span> <span class="fu">max</span>(chart_date,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<blockquote class="blockquote">
<ul>
<li><strong>peak_position_window</strong>: the best rank for that song in the 2015-2019 window.</li>
<li><strong>worst_position_window</strong></li>
<li><strong>mean_position_window</strong></li>
<li><strong>weeks_on_chart_window</strong></li>
<li><strong>weeks_top10/weeks_top40</strong>: the number of weeks a song spent in the top 10 and top 40 within the 2015-2019 window</li>
<li><strong>first/last_chart_window</strong>: the first and last time a song appeared on the chart in the 2015-2019 window</li>
</ul>
</blockquote>
<p>This aggregation removes duplicate weekly entries, prevents over-weighting long-running songs, and produces clean, song-level outcomes that flow naturally into EDA and modeling against audio features.</p>
<p>After a quick collapse of the Spotify data to one row per song and artist to account for duplicates that may have arisen from cleaning, it is ready to be joined to the Billboard data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># COLLAPSE TO 1 ROW PER SONG PER ARTIST (DETERMINISTIC)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># I keep the most popular version; if that fails, I fall back to most recent year, then longest duration.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>sp_song <span class="ot">&lt;-</span> sp_long <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">pop_num =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(popularity)),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">yr_num  =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.integer</span>(year))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>      join_key_sp,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">desc</span>(pop_num),      <span class="co"># 1) highest popularity first</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">desc</span>(yr_num),       <span class="co"># 2) then most recent year</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">desc</span>(duration_ms)   <span class="co"># 3) then longest duration</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(join_key_sp, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>   <span class="co"># keep the first row per key</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>pop_num, <span class="sc">-</span>yr_num)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="data-integration" class="level2">
<h2 class="anchored" data-anchor-id="data-integration">Data Integration</h2>
<p>After properly cleaning the two datasets, I was able to join them together. I did an inner join using the join keys from both datasets, resulting in <strong>1,976 unique songs that charted from 2015-2019</strong>, including their associated audio feature characteristics.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">################### JOINING THE CLEANED DATASETS ######################</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner join on the cleaned join keys</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>songs_join <span class="ot">&lt;-</span> bb_song <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    sp_song,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"join_key_bb"</span> <span class="ot">=</span> <span class="st">"join_key_sp"</span>),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_bb"</span>, <span class="st">"_sp"</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">hit_top10 =</span> <span class="fu">as.integer</span>(peak_position_window <span class="sc">&lt;=</span> <span class="dv">10</span>), <span class="co"># did the song reach the top 10?</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">hit_top40 =</span> <span class="fu">as.integer</span>(peak_position_window <span class="sc">&lt;=</span> <span class="dv">40</span>) <span class="co"># did the song reach the top 40?</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>The final dataset from which I conducted my analysis consists of the song names and primary artist, the song’s Billboard outcomes (including flags indicating if a song reached the top 10 or top 40), Spotify audio features, and a few computed convenience fields, the most important of which is <strong>chart_score</strong>. This is a reverse-rank of each song’s best Hot-100 position within the 2015-2019 window, expressing Billboard peak rank on a “higher = more popular” scale. It maps a #1 peak to 100, a #10 to 91, a #50 to 51, and #100 to 1, so a 10-point difference corresponds to roughly 10 chart places. Using <strong>chart_score</strong> makes directionality intuitive in my analysis, as positive effects imply greater popularity.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">########## FINAL DATASET ##############</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>songs_final <span class="ot">&lt;-</span> songs_join <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># identifiers</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">song            =</span> song_clean_bb,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">primary_artist  =</span> artist_clean_bb,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># billboard outcomes (window = 2015–2019)</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">peak_position   =</span> peak_position_window,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">worst_position  =</span> worst_position_window,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_position   =</span> mean_position_window,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_on_chart  =</span> weeks_on_chart_window,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_in_top_10 =</span> weeks_top10,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_in_top_40 =</span> weeks_top40,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">reached_top_10  =</span> <span class="fu">as.integer</span>(hit_top10),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">reached_top_40  =</span> <span class="fu">as.integer</span>(hit_top40),</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_chart_date =</span> first_chart_window,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_chart_date =</span> last_chart_window,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># spotify popularity + audio features</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">popularity      =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(popularity)),</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    acousticness,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    danceability,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    energy,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    instrumentalness,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    liveness,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    loudness,       <span class="co"># dB ()</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    speechiness,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    tempo,          <span class="co"># BPM</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    valence,</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode            =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.integer</span>(mode)),  <span class="co"># 1=major, 0=minor</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">key             =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.integer</span>(key)),   <span class="co"># 0=C ... 11=B</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">explicit        =</span> <span class="fu">as.integer</span>(<span class="fu">tolower</span>(<span class="fu">as.character</span>(explicit)) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1"</span>,<span class="st">"true"</span>,<span class="st">"t"</span>,<span class="st">"yes"</span>)),</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration_ms     =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(duration_ms)),</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    release_date,</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">release_year    =</span> year,</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convenience fields</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration_min    =</span> duration_ms <span class="sc">/</span> <span class="dv">60000</span>,</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">key_name        =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(<span class="fu">as.character</span>(key),</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"0"</span><span class="ot">=</span><span class="st">"C"</span>,<span class="st">"1"</span><span class="ot">=</span><span class="st">"C#/Db"</span>,<span class="st">"2"</span><span class="ot">=</span><span class="st">"D"</span>,<span class="st">"3"</span><span class="ot">=</span><span class="st">"D#/Eb"</span>,<span class="st">"4"</span><span class="ot">=</span><span class="st">"E"</span>,<span class="st">"5"</span><span class="ot">=</span><span class="st">"F"</span>,</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"6"</span><span class="ot">=</span><span class="st">"F#/Gb"</span>,<span class="st">"7"</span><span class="ot">=</span><span class="st">"G"</span>,<span class="st">"8"</span><span class="ot">=</span><span class="st">"G#/Ab"</span>,<span class="st">"9"</span><span class="ot">=</span><span class="st">"A"</span>,<span class="st">"10"</span><span class="ot">=</span><span class="st">"A#/Bb"</span>,<span class="st">"11"</span><span class="ot">=</span><span class="st">"B"</span>, <span class="at">.default =</span> <span class="cn">NA_character_</span>),</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode_name       =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(<span class="fu">as.character</span>(mode), <span class="st">"1"</span><span class="ot">=</span><span class="st">"major"</span>,<span class="st">"0"</span><span class="ot">=</span><span class="st">"minor"</span>, <span class="at">.default =</span> <span class="cn">NA_character_</span>),</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">chart_score     =</span> <span class="dv">101</span> <span class="sc">-</span> <span class="fu">pmin</span>(peak_position, <span class="dv">100</span>)  <span class="co"># 100 = #1, 1 = #100+</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Here is a preview of the <strong>final dataset</strong>, including <strong>10 songs that topped the Billboard charts in the time-window</strong>, arranged by Spotify’s popularity parameter, as defined by their API.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ten_n01_songs_spotify_pop <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chart_score <span class="sc">==</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(popularity)) <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(song, primary_artist, release_year, first_chart_date, peak_position, chart_score, popularity) <span class="sc">|&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>( <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">caption =</span> <span class="st">'10 #1 Songs (2015-2019), Arranged by Spotify Popularity'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-93492420385e00e43930" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-93492420385e00e43930">{"x":{"filter":"none","vertical":false,"caption":"<caption>10 #1 Songs (2015-2019), Arranged by Spotify Popularity<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["sicko mode","someone you loved","bad guy","highest in the room","senorita","7 rings","rockstar","sad!","perfect","shallow"],["travis scott","lewis capaldi","billie eilish","travis scott","shawn mendes","ariana grande","post malone","xxxtentacion","ed sheeran","lady gaga"],[2018,2019,2019,2019,2019,2019,2018,2018,2017,2018],["2018-08-18","2019-05-25","2019-04-13","2019-10-19","2019-07-06","2019-02-02","2017-10-07","2018-03-17","2017-03-25","2018-10-13"],[1,1,1,1,1,1,1,1,1,1],[100,100,100,100,100,100,100,100,100,100],[92,92,91,91,88,87,87,87,86,86]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>song<\/th>\n      <th>primary_artist<\/th>\n      <th>release_year<\/th>\n      <th>first_chart_date<\/th>\n      <th>peak_position<\/th>\n      <th>chart_score<\/th>\n      <th>popularity<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"song","targets":1},{"name":"primary_artist","targets":2},{"name":"release_year","targets":3},{"name":"first_chart_date","targets":4},{"name":"peak_position","targets":5},{"name":"chart_score","targets":6},{"name":"popularity","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</section>
<section id="data-exploration" class="level2">
<h2 class="anchored" data-anchor-id="data-exploration">Data Exploration</h2>
<p>With this finalized dataset, I was able to derive some interesting insights.</p>
<section id="summary-table" class="level4">
<h4 class="anchored" data-anchor-id="summary-table">Summary Table</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># quick summary table</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"peak_position"</span>,<span class="st">"weeks_on_chart"</span>,<span class="st">"chart_score"</span>,<span class="st">"reached_top_10"</span>, <span class="st">"reached_top_40"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">all_of</span>(vars))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>summary_tbl <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">everything</span>(),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">N       =</span> <span class="sc">~</span><span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(.)),</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">Min     =</span> <span class="sc">~</span><span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">Q1      =</span> <span class="sc">~</span><span class="fu">quantile</span>(., <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">Median  =</span> <span class="sc">~</span><span class="fu">median</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">Mean    =</span> <span class="sc">~</span><span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># for 0/1, rate</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">Q3      =</span> <span class="sc">~</span><span class="fu">quantile</span>(., <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">Max     =</span> <span class="sc">~</span><span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(),</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"variable"</span>,<span class="st">"stat"</span>),</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">"_(?=[^_]+$)"</span>,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> stat, <span class="at">values_from =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Num_songs =</span> <span class="fu">if_else</span>(variable <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"reached_top_10"</span>, <span class="st">"reached_top_40"</span>),</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">round</span>(Mean <span class="sc">*</span> N), <span class="cn">NA_real_</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(variable, Min, Q1, Median, Mean, Q3, Max, Num_songs) <span class="sc">|&gt;</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>N) </span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="fu">flextable</span>(summary_tbl)</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="fu">autofit</span>(ft)</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="fu">theme_vanilla</span>(ft)</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="fu">colformat_double</span>(ft, <span class="at">j =</span> <span class="fu">c</span>(<span class="st">"Mean"</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="tabwid"><style>.cl-29ab80c0{}.cl-29a91416{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-29a9142a{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-29aa0b3c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-29aa0b46{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-29aa15c8{width:1.398in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15c9{width:0.531in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15ca{width:0.489in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15d2{width:0.786in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15d3{width:1.092in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15d4{width:0.574in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15dc{width:1.1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15dd{width:1.398in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15de{width:0.531in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15e6{width:0.489in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15e7{width:0.786in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15e8{width:1.092in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15f0{width:0.574in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15f1{width:1.1in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15fa{width:1.398in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15fb{width:0.531in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa15fc{width:0.489in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1604{width:0.786in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1605{width:1.092in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa160e{width:0.574in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa160f{width:1.1in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1610{width:1.398in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1618{width:0.531in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1619{width:0.489in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1622{width:0.786in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1623{width:1.092in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1624{width:0.574in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1625{width:1.1in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1626{width:1.398in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa162c{width:0.531in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa162d{width:0.489in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa162e{width:0.786in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1636{width:1.092in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1637{width:0.574in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-29aa1640{width:1.1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-29ab80c0"><thead><tr style="overflow-wrap:break-word;"><th class="cl-29aa15c8"><p class="cl-29aa0b3c"><span class="cl-29a91416">variable</span></p></th><th class="cl-29aa15c9"><p class="cl-29aa0b46"><span class="cl-29a91416">Min</span></p></th><th class="cl-29aa15ca"><p class="cl-29aa0b46"><span class="cl-29a91416">Q1</span></p></th><th class="cl-29aa15d2"><p class="cl-29aa0b46"><span class="cl-29a91416">Median</span></p></th><th class="cl-29aa15d3"><p class="cl-29aa0b46"><span class="cl-29a91416">Mean</span></p></th><th class="cl-29aa15ca"><p class="cl-29aa0b46"><span class="cl-29a91416">Q3</span></p></th><th class="cl-29aa15d4"><p class="cl-29aa0b46"><span class="cl-29a91416">Max</span></p></th><th class="cl-29aa15dc"><p class="cl-29aa0b46"><span class="cl-29a91416">Num_songs</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-29aa15dd"><p class="cl-29aa0b3c"><span class="cl-29a9142a">peak_position</span></p></td><td class="cl-29aa15de"><p class="cl-29aa0b46"><span class="cl-29a9142a">1</span></p></td><td class="cl-29aa15e6"><p class="cl-29aa0b46"><span class="cl-29a9142a">24</span></p></td><td class="cl-29aa15e7"><p class="cl-29aa0b46"><span class="cl-29a9142a">49</span></p></td><td class="cl-29aa15e8"><p class="cl-29aa0b46"><span class="cl-29a9142a">48.35</span></p></td><td class="cl-29aa15e6"><p class="cl-29aa0b46"><span class="cl-29a9142a">71</span></p></td><td class="cl-29aa15f0"><p class="cl-29aa0b46"><span class="cl-29a9142a">100</span></p></td><td class="cl-29aa15f1"><p class="cl-29aa0b46"><span class="cl-29a9142a"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-29aa15fa"><p class="cl-29aa0b3c"><span class="cl-29a9142a">weeks_on_chart</span></p></td><td class="cl-29aa15fb"><p class="cl-29aa0b46"><span class="cl-29a9142a">1</span></p></td><td class="cl-29aa15fc"><p class="cl-29aa0b46"><span class="cl-29a9142a">2</span></p></td><td class="cl-29aa1604"><p class="cl-29aa0b46"><span class="cl-29a9142a">9</span></p></td><td class="cl-29aa1605"><p class="cl-29aa0b46"><span class="cl-29a9142a">11.87</span></p></td><td class="cl-29aa15fc"><p class="cl-29aa0b46"><span class="cl-29a9142a">20</span></p></td><td class="cl-29aa160e"><p class="cl-29aa0b46"><span class="cl-29a9142a">58</span></p></td><td class="cl-29aa160f"><p class="cl-29aa0b46"><span class="cl-29a9142a"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-29aa15fa"><p class="cl-29aa0b3c"><span class="cl-29a9142a">chart_score</span></p></td><td class="cl-29aa15fb"><p class="cl-29aa0b46"><span class="cl-29a9142a">1</span></p></td><td class="cl-29aa15fc"><p class="cl-29aa0b46"><span class="cl-29a9142a">30</span></p></td><td class="cl-29aa1604"><p class="cl-29aa0b46"><span class="cl-29a9142a">52</span></p></td><td class="cl-29aa1605"><p class="cl-29aa0b46"><span class="cl-29a9142a">52.65</span></p></td><td class="cl-29aa15fc"><p class="cl-29aa0b46"><span class="cl-29a9142a">77</span></p></td><td class="cl-29aa160e"><p class="cl-29aa0b46"><span class="cl-29a9142a">100</span></p></td><td class="cl-29aa160f"><p class="cl-29aa0b46"><span class="cl-29a9142a"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-29aa1610"><p class="cl-29aa0b3c"><span class="cl-29a9142a">reached_top_10</span></p></td><td class="cl-29aa1618"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa1619"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa1622"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa1623"><p class="cl-29aa0b46"><span class="cl-29a9142a">0.13</span></p></td><td class="cl-29aa1619"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa1624"><p class="cl-29aa0b46"><span class="cl-29a9142a">1</span></p></td><td class="cl-29aa1625"><p class="cl-29aa0b46"><span class="cl-29a9142a">248</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-29aa1626"><p class="cl-29aa0b3c"><span class="cl-29a9142a">reached_top_40</span></p></td><td class="cl-29aa162c"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa162d"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa162e"><p class="cl-29aa0b46"><span class="cl-29a9142a">0</span></p></td><td class="cl-29aa1636"><p class="cl-29aa0b46"><span class="cl-29a9142a">0.39</span></p></td><td class="cl-29aa162d"><p class="cl-29aa0b46"><span class="cl-29a9142a">1</span></p></td><td class="cl-29aa1637"><p class="cl-29aa0b46"><span class="cl-29a9142a">1</span></p></td><td class="cl-29aa1640"><p class="cl-29aa0b46"><span class="cl-29a9142a">773</span></p></td></tr></tbody></table></div>
</section>
<section id="what-artist-dominated-the-charts-from-2015-2019" class="level3">
<h3 class="anchored" data-anchor-id="what-artist-dominated-the-charts-from-2015-2019">What artist dominated the charts from 2015-2019?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>artist_leaders <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(primary_artist) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">no1_hits   =</span> <span class="fu">sum</span>(peak_position <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">top10_hits =</span> <span class="fu">sum</span>(reached_top_10 <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">top40_hits =</span> <span class="fu">sum</span>(reached_top_40 <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">hot100_songs =</span> <span class="fu">n</span>()</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(no1_hits), <span class="fu">desc</span>(top10_hits), <span class="fu">desc</span>(top40_hits), <span class="fu">desc</span>(hot100_songs))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>top_artists <span class="ot">&lt;-</span> artist_leaders <span class="sc">|&gt;</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">caption =</span> <span class="st">'10 Artists with the Most Billboard Hits (2015-2019)'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-06004e181bb9e2d5f66f" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-06004e181bb9e2d5f66f">{"x":{"filter":"none","vertical":false,"caption":"<caption>10 Artists with the Most Billboard Hits (2015-2019)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["drake","taylor swift","post malone","the weeknd","justin bieber","ariana grande","ed sheeran","travis scott","cardi b","maroon 5"],[4,3,3,3,3,2,2,2,2,1],[13,10,6,6,3,9,6,3,3,6],[41,18,19,14,6,21,10,14,12,8],[81,33,25,28,13,34,23,22,16,8]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>primary_artist<\/th>\n      <th>no1_hits<\/th>\n      <th>top10_hits<\/th>\n      <th>top40_hits<\/th>\n      <th>hot100_songs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"primary_artist","targets":1},{"name":"no1_hits","targets":2},{"name":"top10_hits","targets":3},{"name":"top40_hits","targets":4},{"name":"hot100_songs","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Drake</strong>, unsurprisingly, was the most successful Billboard charting artist from 2015-2019, with <strong>4 number 1 hits</strong>, <strong>13 top 10 hits</strong>, <strong>41 top 40 hits</strong>, and <strong>81 songs</strong> hitting the charts in general.</p>
</blockquote>
</section>
<section id="release-year-trends" class="level3">
<h3 class="anchored" data-anchor-id="release-year-trends">Release Year Trends</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># early Top-10 / Top-40 *rates* and mean Spotify popularity</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>by_year_rates <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">yr =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.integer</span>(release_year))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yr <span class="sc">%in%</span> <span class="dv">2013</span><span class="sc">:</span><span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yr) <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n           =</span> <span class="fu">n</span>(),</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">top10_rate  =</span> <span class="fu">mean</span>(reached_top_10 <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># share of songs that hit Top-10</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">top40_rate  =</span> <span class="fu">mean</span>(reached_top_40 <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># share of songs that hit Top-40</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pop    =</span> <span class="fu">mean</span>(popularity, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),           <span class="co"># Spotify popularity (0–100 scale)</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Make popularity comparable to rates</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pop_rate =</span> mean_pop <span class="sc">/</span> <span class="dv">100</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yr, top10_rate, top40_rate, mean_pop_rate) <span class="sc">|&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Long format </span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>yr, <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot lines, add a legend, and use a dotted line for mean popularity</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>viz1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(by_year_rates, <span class="fu">aes</span>(<span class="at">x =</span> yr, <span class="at">y =</span> value, <span class="at">color =</span> metric, <span class="at">linetype =</span> metric)) <span class="sc">+</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2013</span><span class="sc">:</span><span class="dv">2019</span>) <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># interpret all series as percentages</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># colors and linetypes </span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">top10_rate     =</span> <span class="st">"#1b9e77"</span>,</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">top40_rate     =</span> <span class="st">"#d95f02"</span>,</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_pop_rate  =</span> <span class="st">"#333333"</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">top10_rate     =</span> <span class="st">"Top-10 rate"</span>,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">top40_rate     =</span> <span class="st">"Top-40 rate"</span>,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_pop_rate  =</span> <span class="st">"Mean Spotify popularity"</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">top10_rate     =</span> <span class="st">"solid"</span>,</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">top40_rate     =</span> <span class="st">"solid"</span>,</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_pop_rate  =</span> <span class="st">"dashed"</span>   <span class="co"># dotted/dashed style for popularity</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">top10_rate     =</span> <span class="st">"Top-10 rate"</span>,</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">top40_rate     =</span> <span class="st">"Top-40 rate"</span>,</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_pop_rate  =</span> <span class="st">"Mean Spotify popularity"</span></span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Release year"</span>,</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Percent"</span>,</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span>, <span class="at">linetype =</span> <span class="cn">NULL</span>,</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Hit rates vs. mean Spotify popularity by release year (2013–2019)"</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>hits_in_2018 <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(release_year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(chart_score), <span class="fu">desc</span>(popularity)) <span class="sc">|&gt;</span></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(primary_artist, song, peak_position, popularity, weeks_in_top_10, weeks_in_top_40) <span class="sc">|&gt;</span></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">caption =</span> <span class="st">"Top Hits in 2018, Arranged by Spotify Popularity"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="billboard_spotify_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>When analyzing the percentage of songs that reached the top 10 and top 40 yearly, and comparing that with Spotify’s popularity metric, it is clear to see that while <strong>“popularity” has steadily increased over time</strong> for songs on Spotify, the same cannot be said of <strong>Billboard charting success</strong>, which is much <strong>more variable</strong>. <strong>2018</strong> seems to be the <strong>year of release</strong> where songs did better commercially than in other years. The year includes mega-hits like “Rockstar” by Post Malone, “God’s Plan” by Drake, and <strong>“Sicko Mode” by Travis Scott</strong>, which was the <strong>most popular song that year on Spotify</strong>.</p>
</blockquote>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-67b1c36c2c3487238515" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-67b1c36c2c3487238515">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top Hits in 2018, Arranged by Spotify Popularity<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467"],["travis scott","post malone","xxxtentacion","lady gaga","post malone","drake","halsey","childish gambino","camila cabello","cardi b","drake","post malone","drake","maroon 5","cardi b","juice wrld","marshmello","drake","kodak black","lil wayne","post malone","ariana grande","6ix9ine","eminem","j balvin","panic! at the disco","the weeknd","charlie puth","zedd","bad bunny","blocboy jb","dj khaled","lil wayne","meek mill","sheck wes","lil baby","eminem","migos","camila cabello","j cole","maroon 5","5 seconds of summer","drake","lil wayne","kendrick lamar","travis scott","ariana grande","tyga","khalid","lil dicky","blueface","j cole","migos","eminem","drake","kanye west","benny blanco","khalid","drake","justin timberlake","maroon 5","ava max","migos","j cole","bts","nicki minaj","lil wayne","marshmello","dj snake","shawn mendes","bazzi","gucci mane","ella mai","bts","post malone","kanye west","cardi b","21 savage","ariana grande","6ix9ine","eminem","xxxtentacion","imagine dragons","cardi b","rich the kid","drake","machine gun kelly","ynw melly","post malone","cardi b","j cole","drake","lil wayne","post malone","j cole","panic! at the disco","post malone","yg","xxxtentacion","kanye west","eminem","travis scott","maroon 5","morgan wallen","post malone","lil wayne","drake","xxxtentacion","selena gomez","drake","nicki minaj","flipp dinero","post malone","j cole","drake","meek mill","luke combs","jay rock","charlie puth","cardi b","drake","kenny chesney","logic","dean lewis","post malone","eminem","cardi b","ellie goulding","post malone","travis scott","lil uzi vert","eminem","lil pump","maroon 5","kanye west","lil wayne","travis scott","6ix9ine","nicki minaj","calvin harris","bazzi","future","city girls","travis scott","the weeknd","lauv","a boogie wit da hoodie","travis scott","the weeknd","kanye west","drake","xxxtentacion","famous dex","rae sremmurd","jason aldean","cardi b","drake","kanye west","j cole","juice wrld","lauren daigle","logic","lovelytheband","post malone","city girls","6ix9ine","travis scott","drake","j cole","meek mill","luke combs","travis scott","youngboy never broke again","meek mill","drake","jason aldean","mac miller","post malone","bebe rexha","the weeknd","trevor daniel","casper magico","travis scott","migos","kanye west","lil wayne","summer walker","xxxtentacion","jimmie allen","drake","a boogie wit da hoodie","travis scott","metro boomin","cardi b","drake","chris lane","kids see ghosts","mitchell tenpenny","eminem","meek mill","cardi b","post malone","pardison fontaine","jason aldean","juice wrld","lady gaga","travis scott","rich the kid","drake","j cole","metro boomin","drake","kids see ghosts","nicki minaj","brett young","scotty mccreery","eminem","youngboy never broke again","mark ronson","daddy yankee","tory lanez","travis scott","the weeknd","6ix9ine","6ix9ine","eric church","cardi b","juice wrld","6ix9ine","childish gambino","scotty mccreery","a$ap rocky","lanco","queen naija","dierks bentley","trippie redd","playboi carti","kodak black","lil baby","6ix9ine","post malone","jordan davis","ybn nahmir","jason aldean","meghan trainor","j cole","demi lovato","french montana","travis scott","post malone","kelsea ballerini","kids see ghosts","carrie underwood","j cole","shawn mendes","maluma","travis scott","quavo","xxxtentacion","migos","morgan wallen","ozuna","cole swindell","cole swindell","lin manuel miranda","travis scott","the chainsmokers","6ix9ine","twenty one pilots","eli young band","jordan davis","cardi b","6ix9ine","keith urban","metro boomin","camila cabello","dierks bentley","6ix9ine","xxxtentacion","trippie redd","migos","ozuna","the weeknd","devin dawson","steve aoki","travis scott","charlie puth","morgan evans","6ix9ine","dierks bentley","brantley gilbert","childish gambino","bad wolves","meek mill","takeoff","xxxtentacion","trippie redd","blackpink","chris lane","ariana grande","imagine dragons","logic","khalid","khalid","post malone","cardi b","clean bandit","jacquees","21 savage","kodak black","cardi b","ciara","a boogie wit da hoodie","youngboy never broke again","panic! at the disco","nicki minaj","chance the rapper","anuel aa","5 seconds of summer","charlie puth","silk city","metro boomin","ella mai","ariana grande","kids see ghosts","lil baby","ski mask the slump god","kygo","tyga","a$ap rocky","queen naija","lil yachty","billie eilish","lil xan","carrie underwood","nav","xxxtentacion","calvin harris","the chainsmokers","shawn mendes","nipsey hussle","megan thee stallion","xxxtentacion","eminem","david lee murphy","halsey","lil baby","juice wrld","bts","21 savage","eminem","kids see ghosts","michael ray","juice wrld","travis scott","bhad bhabie","kevin gates","eric church","kelsea ballerini","joji","billie eilish","jacquees","kids see ghosts","youngboy never broke again","keith urban","xxxtentacion","becky g","lukas graham","mac miller","g eazy","wiz khalifa","ozuna","metro boomin","ariana grande","sugarland","future","trippie redd","zayn","21 savage","wiz khalifa","lil yachty","blac youngsta","pusha t","kids see ghosts","post malone","meek mill","lil baby","kygo","logic","kodak black","lil wayne","zara larsson","6lack","nipsey hussle","tk kravitz","martin garrix","diplo","young thug","alec benjamin","twenty one pilots","bhad bhabie","metro boomin","lil skies","lil baby","lil mosey","alan walker","xxxtentacion","troye sivan","jennifer lopez","twenty one pilots","ski mask the slump god","luke combs","sofi tukker","nf","future","xxxtentacion","swae lee","xxxtentacion","rae sremmurd","benny blanco","gorillaz","doja cat","nav","21 savage","ski mask the slump god","maluma","ariana grande","youngboy never broke again","j cole","major lazer","khalid","kodak black","steve aoki","tyler, the creator","ariana grande","khalid","young thug","trippie redd","zedd","a boogie wit da hoodie","p!nk","jason mraz","lil yachty","mac miller","joyner lucas","clean bandit","wiz khalifa","juice wrld","calum scott","dua lipa","bad bunny","nipsey hussle","ozuna","xxxtentacion","21 savage","lil mosey","kacey musgraves","lil yachty","rae sremmurd","trippie redd","roddy ricch","6ix9ine","takeoff","ariana grande","ajr","nipsey hussle","pusha t"],["sicko mode","rockstar","sad!","shallow","sunflower spider man into the spider verse","god's plan","without me","this is america","havana","i like it","in my feelings","psycho","nice for what","girls like you","bodak yellow","lucid dreams","happier","nonstop","zeze","mona lisa","better now","no tears left to cry","fefe","killshot","mi gente","high hopes","call out my name","attention","the middle","mia","look alive","no brainer","don't cry","going bad","mo bamba","yes indeed","lucky you","motorsport","never be the same","atm","don't wanna know","youngblood","i'm upset","uproar","all the stars","stargazing","god is a woman","taste","better","freaky friday","thotiana","kevin's heart","stir fry","the ringer","emotionless","yikes","eastside","love lies","don't matter to me","say something","what lovers do","sweet but psycho","walk it talk it","kod","fake love","chun li","let it fly","friends","taki taki","in my blood","mine","wake up in the sky","trip","idol","paranoid","all mine","be careful","a lot","breathin","gummo","fall","moonlight","natural","money","plug walk","mob ties","rap devil","murder on my mind","rich sad","bartier cardi","photograph","elevate","dedicate","spoil my night","motiv8","hey look ma i made it","ball for me","big bank","bad!","ghost town","kamikaze","watch","cold","whiskey glasses","stay","can't be broken","survival","changes","back to you","can't take a joke","barbie dreams","leave me alone","same bitches","1985 intro to the fall off","talk up","what's free","beautiful crazy","king's dead","how long","drip","8 out of 10","get along","44 more","be alright","zack and codeine","greatest","i do","close to me","over now","carousel","new patek","not alike","esskeetit","wait","wouldn't leave","what about me","yosemite","stoopid","barbie tingz","one kiss","beautiful","fine china","act up","rip screw","try me","i like me better","look back at it","stop trying to be god","wasted times","violent crimes","sandra's rose","arms around you","japan","powerglide","you make it easy","ring","summer games","i thought about killing you","the cut off","legends","you say","everyday","broken","takin' shots","twerk","bebe","wake up","blue tint","brackets","on me","she got the best of me","no bystanders","outside today","dangerous","jaded","drowns the whiskey","self care","candy paint","i'm a mess","i was never there","falling","te bote","5 tint","narcos","no mistakes","famous","girls need love","whoa mind in awe","best shot","that's how you feel","swervin","can't say","don't come out the house","get up 10","peak","i don't know about you","reborn","drunk me","normal","uptown vibes","best life","92 explorer","backin' it up","rearview town","all girls are the same","always remember us this way","nc 17","new freezer","after dark","window pain outro","10 freaky girls","finesse","4th dimension","bed","here tonight","this is it","stepping stone","overdose","nothing breaks like a heart","dura","talk to me","who what!","hurt you","keke","mama","some of it","bickenhead","armed and dangerous","kika","summertime magic","five more minutes","praise the lord da shine","greatest love story","medicine","burning man","taking a walk","shoota","calling my spirit","pure cocaine","tati","otherside","take it from me","rubbin off the paint","girl like you","no excuses","friends","sober","no stylist","skeletons","blame it on me","miss me more","feel the love","the champion","once an addict interlude","lost in japan","felices los 4","astrothunder","flip the switch","guardian angel","bbo bad bitches only","up down","el farsante","break up in the end","love you too late","found tonight","butterfly effect","this feeling","billy","jumpsuit","love ain't","singles you up","thru your phone","kooda","coming home","space cadet","consequences","living","waka","i don't let go","topanga","notice me","la modelo","privilege","all on me","just hold on","houstonfornication","done for me","kiss somebody","tic toc","woman amen","what happens in a small town","feels like summer","zombie","24 7","last memory","the remedy for a broken heart why am i so in love","1400 999 freestyle","ddu du ddu du","take back home girl","sweetener","bad liar","indica badu","otw","saturday nights","sugar wraith","she bad","solo","you","can't leave without it","moshpit","money bag","level up","startender","diamond teeth samurai","say amen saturday night","good form","i might need security","ella quiere beber","want you back","the way i am","electricity","overdue","shot clock","everytime","freeee ghost town pt 2","time","nuketown","remind me to forget","dip","a$ap forever","karma","nbayoungboat","lovely","betrayed","southbound","wanted you","train food","promises","sick boy","youth","double up","big ole freak","what are you so afraid of","nice guy","everything's gonna be alright","alone","ready","wasted","dna","all my friends","good guy","fire","one that got away","lean wit me","coffee bean","hi bich","change lanes","desperate man","legends","slow dancing in the dark","come out and play","bed","cudi montage","i am who they say i am","female","hope","sin pijama","love someone","hurt feelings","1942","hopeless romantic","unica","dreamcatcher","rem","babe","jet lag","love scars 3","let me","monster","fr fr","66","booty","if you know you know","kids see ghosts","jonestown interlude","millidelphia","life goes on","born to be yours","midnight","testimony","let it all work out","ruin my life","pretty little fears","last time that i checc'd","ocean","ocean","welcome to the party","chanel go get it","let me down slowly","nico and the niners","gucci flip flops","no more","i know you","southside","noticed","faded","numb","my my my!","dinero","my blood","foot fungus","must've never met you","best friend","no name","astronauts","infinity 888","guatemala","difference interlude","perplexing pegasus","roses","humility","candy","champion","15","faucet failure","corazon","goodnight n go","valuable pain","album of the year freestyle","know no better","suncity","gnarly","waste it on me","okra","the light is coming","vertigo","anybody","negative energy","happy now","demons and angels","a million dreams","have it all","yacht club","come back to earth","stranger things","i miss you","something new","make it back","dancing on my own","kiss and make up","solo de mi","dedication","vaina loca","going down!","asmr","kamikaze","rainbow","get dripped","close","toxic waste","die young","gotti","casper","pete davidson","burn the house down","victory lap","the games we play"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,5,5,5,5,5,5,6,6,6,6,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,20,20,20,20,20,21,21,21,21,21,22,22,23,23,23,23,24,24,24,24,24,24,24,24,24,25,25,25,26,26,26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28,28,28,29,29,29,29,29,29,30,30,30,30,30,31,31,31,31,32,32,33,34,35,35,36,36,36,36,36,36,37,37,37,37,38,38,38,38,38,39,39,39,39,39,39,40,40,40,41,41,41,41,41,41,42,42,42,42,42,42,42,42,43,43,43,43,43,43,43,43,43,44,44,44,44,45,45,45,45,46,46,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,48,48,48,48,48,48,49,49,49,49,49,50,50,50,50,50,50,50,50,50,51,51,51,51,51,52,52,52,52,52,52,53,53,53,53,53,53,54,54,54,54,55,55,55,55,55,56,56,57,57,57,57,58,58,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62,62,62,62,63,63,63,63,63,63,64,64,64,64,64,65,65,65,65,65,65,65,66,66,66,67,67,67,67,67,67,68,68,68,68,68,68,69,69,69,69,69,69,70,70,70,70,70,72,72,72,72,72,72,73,73,73,73,73,73,73,73,73,73,74,74,74,74,75,76,76,76,76,78,78,78,79,79,79,79,79,79,80,80,80,80,80,81,81,81,81,82,82,83,84,84,84,85,85,86,86,86,87,87,87,87,87,87,88,88,89,89,89,89,89,89,90,90,90,90,91,91,91,92,92,92,93,93,93,93,94,95,95,97,98,98,98,98,99,99,99,99,100,100,100],[92,87,87,86,86,84,84,83,82,82,81,81,80,78,74,89,86,81,81,69,85,82,81,74,74,84,82,82,82,80,77,74,65,83,80,80,78,74,74,68,64,83,72,71,62,84,80,80,78,76,74,73,73,72,67,67,81,77,73,71,70,85,77,73,72,71,62,82,81,80,80,77,76,75,73,72,70,80,77,73,70,85,82,77,76,73,68,83,74,69,65,64,61,72,67,75,73,73,70,70,69,68,63,81,77,61,61,84,77,67,66,75,71,67,61,60,81,75,74,66,62,73,71,82,71,69,68,79,73,72,71,70,65,63,63,60,81,74,66,84,79,78,75,73,72,85,79,74,72,71,64,75,74,72,72,69,62,61,61,82,78,75,74,70,70,78,77,64,63,59,78,77,70,67,66,65,78,79,79,69,92,79,73,71,61,59,80,74,72,65,83,81,68,61,61,74,73,72,64,64,61,73,65,64,85,79,70,68,62,62,78,71,69,69,67,66,65,60,76,74,73,71,70,68,68,67,60,82,78,70,66,81,74,71,67,79,77,73,73,72,71,71,69,66,66,60,75,73,72,70,69,66,65,59,76,75,74,73,66,63,74,72,66,66,60,85,79,77,72,72,72,72,70,58,78,74,69,69,65,75,70,69,68,66,60,74,69,69,68,64,59,73,72,68,61,82,79,75,71,69,83,63,76,76,71,63,77,71,68,67,60,69,69,58,69,65,61,78,68,66,78,70,70,69,61,60,75,73,68,67,65,65,89,74,68,67,60,81,72,71,70,68,67,63,67,61,61,78,72,70,66,62,61,81,72,64,59,59,58,84,74,69,65,64,58,82,76,75,70,69,75,69,68,68,65,65,70,69,68,67,66,62,62,62,61,61,72,63,62,58,60,79,76,67,62,73,71,69,85,70,69,65,63,60,82,79,75,73,63,73,71,70,66,67,64,70,71,64,62,77,66,79,76,61,79,72,72,64,60,60,69,62,70,65,64,64,63,62,77,73,67,67,75,71,70,75,75,65,82,77,71,66,76,68,61,75,73,69,65,62,74,74,71,64,71,64,62],[32,24,6,7,33,26,29,5,22,21,14,21,17,33,20,26,27,1,13,1,19,12,11,2,7,15,1,10,16,1,13,2,1,2,6,2,1,6,3,1,14,7,1,1,4,1,2,8,1,5,2,1,4,1,1,1,2,3,1,1,4,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[45,40,28,35,53,35,52,10,38,44,22,33,25,51,31,44,49,21,24,2,51,23,18,3,25,43,9,31,35,24,24,11,1,31,21,27,4,19,30,1,22,39,9,11,14,4,20,25,30,13,15,1,13,2,2,2,47,34,3,10,19,31,16,1,1,5,1,23,22,20,30,21,23,1,2,2,14,21,17,14,2,7,21,23,16,2,3,10,2,15,1,1,1,1,1,15,2,16,3,1,1,1,13,16,1,1,1,4,22,1,2,16,1,1,1,1,16,8,17,2,1,5,1,13,1,1,1,17,1,1,2,1,2,16,1,1,1,1,1,13,15,1,16,1,1,16,21,1,1,1,1,1,4,8,12,4,1,1,1,1,16,1,8,1,1,1,1,1,1,1,8,1,8,1,1,4,1,1,7,1,2,5,1,1,1,1,1,1,2,1,3,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>primary_artist<\/th>\n      <th>song<\/th>\n      <th>peak_position<\/th>\n      <th>popularity<\/th>\n      <th>weeks_in_top_10<\/th>\n      <th>weeks_in_top_40<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"primary_artist","targets":1},{"name":"song","targets":2},{"name":"peak_position","targets":3},{"name":"popularity","targets":4},{"name":"weeks_in_top_10","targets":5},{"name":"weeks_in_top_40","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
</section>
<section id="are-there-audio-feature-differences-between-songs-that-reach-the-top-10-and-those-that-dont" class="level3">
<h3 class="anchored" data-anchor-id="are-there-audio-feature-differences-between-songs-that-reach-the-top-10-and-those-that-dont">Are there audio feature differences between songs that reach the top 10 and those that don’t?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>features_to_plot <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"danceability"</span>,<span class="st">"energy"</span>,<span class="st">"loudness"</span>,<span class="st">"valence"</span>,<span class="st">"speechiness"</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tempo"</span>,<span class="st">"duration_min"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(reached_top_10, <span class="fu">all_of</span>(features_to_plot)) <span class="sc">|&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">reached_top_10 =</span> <span class="fu">factor</span>(reached_top_10, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>reached_top_10, <span class="at">names_to =</span> <span class="st">"feature"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">feature =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    feature,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">danceability =</span> <span class="st">"danceability"</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">energy       =</span> <span class="st">"energy"</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">loudness     =</span> <span class="st">"loudness (dB)"</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">valence      =</span> <span class="st">"valence"</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">speechiness  =</span> <span class="st">"speechiness"</span>,</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">tempo        =</span> <span class="st">"tempo (BPM)"</span>,</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration_min =</span> <span class="st">"duration (min)"</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot: violin + boxplot</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>viz2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plot_df, <span class="fu">aes</span>(<span class="at">x =</span> reached_top_10, <span class="at">y =</span> value, <span class="at">fill =</span> reached_top_10)) <span class="sc">+</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Violin </span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">alpha =</span> <span class="fl">0.20</span>, <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Boxplot </span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">outlier.alpha =</span> <span class="fl">0.15</span>, <span class="at">fatten =</span> <span class="fl">1.4</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> feature, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"No"</span> <span class="ot">=</span> <span class="st">"#cbd5e1"</span>, <span class="st">"Yes"</span> <span class="ot">=</span> <span class="st">"#6366f1"</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Top-10 hit?"</span>,</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Audio feature distributions by Top-10 outcome"</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.spacing    =</span> <span class="fu">unit</span>(<span class="dv">12</span>, <span class="st">"pt"</span>),</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text       =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title       =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title       =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x      =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">2</span>))</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="billboard_spotify_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Top 10 hits</strong> favor tracks with <strong>higher danceability</strong>, as well as tracks that have a more <strong>positive theme</strong>, as highlighted by the <strong>valence</strong> distributions. Interestingly, energy does not seem to be favored by Top 10 hits any which way, indicating that the Billboard charts include a good mix of <strong>low and high energy songs</strong>.</p>
</blockquote>
</section>
<section id="what-audio-features-are-more-conducive-to-staying-power-on-the-billboard-hot-100" class="level3">
<h3 class="anchored" data-anchor-id="what-audio-features-are-more-conducive-to-staying-power-on-the-billboard-hot-100">What audio features are more conducive to staying power on the Billboard Hot 100?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find audio feature relationship with weeks_on_chart</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>features_num1 <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"acousticness"</span>,<span class="st">"danceability"</span>,<span class="st">"energy"</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"liveness"</span>,<span class="st">"loudness"</span>,<span class="st">"speechiness"</span>,<span class="st">"tempo"</span>,<span class="st">"valence"</span>,<span class="st">"duration_min"</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> songs_final <span class="sc">|&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(weeks_on_chart, <span class="fu">all_of</span>(features_num1)) <span class="sc">|&gt;</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>weeks_on_chart, <span class="at">names_to =</span> <span class="st">"feature"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">feature =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    feature,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">loudness     =</span> <span class="st">"loudness (dB)"</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">tempo        =</span> <span class="st">"tempo (BPM)"</span>,</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration_min =</span> <span class="st">"duration (min)"</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default     =</span> feature</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value), <span class="sc">!</span><span class="fu">is.na</span>(weeks_on_chart))</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>viz3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plot_df, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">y =</span> weeks_on_chart)) <span class="sc">+</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.08</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># smoother: GAM with a small basis to avoid overfitting on skewed features (speechiness)</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">"gam"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">s</span>(x, <span class="at">k =</span> <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> feature, <span class="at">scales =</span> <span class="st">"free_x"</span>, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Weeks"</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Relationships between numeric audio features and number of weeks on the Billboard Hot 100 Charts (2015-2019)"</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>)</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="billboard_spotify_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Plotting the relationships between some numeric audio features and the staying power of a song on the charts shows that certain features are more associated with a song staying on the charts for a longer time. In general, <strong>higher energy, louder songs</strong> have more staying power on Billboard’s Hot 100. The same can be said for songs with more <strong>positive content (valence)</strong>, and songs that are <strong>more danceable</strong>. There is a clear sweet spot for the duration of a song that is most conducive to increased staying power, and most songs are clustered around that 3-4 minute range anyway.</p>
</blockquote>
</section>
</section>
<section id="what-aspects-of-a-songs-quality-best-impact-its-billboard-charting-success" class="level2">
<h2 class="anchored" data-anchor-id="what-aspects-of-a-songs-quality-best-impact-its-billboard-charting-success">What Aspects of a Song’s Quality Best Impact Its Billboard Charting Success?</h2>
<p>At this point, I seek to answer my main question of analysis. <strong>What Aspects of a Song’s Quality Best Impact Its Billboard Charting Success?</strong></p>
<section id="correlation-heatmap" class="level3">
<h3 class="anchored" data-anchor-id="correlation-heatmap">Correlation Heatmap</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation Matrix/Heatmap</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Columns to include</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>audio_feats <span class="ot">&lt;-</span> <span class="fu">intersect</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"acousticness"</span>,<span class="st">"danceability"</span>,<span class="st">"energy"</span>,<span class="st">"instrumentalness"</span>,<span class="st">"liveness"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"loudness"</span>,<span class="st">"speechiness"</span>,<span class="st">"tempo"</span>,<span class="st">"valence"</span>,<span class="st">"duration_min"</span>,<span class="st">"mode"</span>,<span class="st">"key"</span>,<span class="st">"explicit"</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(songs_final)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"chart_score"</span>, audio_feats)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix </span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>num_df <span class="ot">&lt;-</span> songs_final <span class="sc">%&gt;%</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(vars)) <span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as.numeric))</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co"># order non-target features by absolute correlation with the target</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>corr_to_target <span class="ot">&lt;-</span> <span class="fu">cor</span>(num_df, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>)[</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"chart_score"</span>, <span class="fu">setdiff</span>(vars, <span class="st">"chart_score"</span>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>ord_rest <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="fu">abs</span>(corr_to_target), <span class="at">decreasing =</span> <span class="cn">TRUE</span>))</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>vars_ord <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"chart_score"</span>, ord_rest)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>cor_mat <span class="ot">&lt;-</span> <span class="fu">cor</span>(num_df[, vars_ord], <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co"># labels</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>label_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">chart_score   =</span> <span class="st">"Chart score"</span>,</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">acousticness  =</span> <span class="st">"Acousticness"</span>,</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">danceability  =</span> <span class="st">"Danceability"</span>,</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">energy        =</span> <span class="st">"Energy"</span>,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">instrumentalness =</span> <span class="st">"Instrumentalness"</span>,</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">liveness      =</span> <span class="st">"Liveness"</span>,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">loudness      =</span> <span class="st">"Loudness"</span>,</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">speechiness   =</span> <span class="st">"Speechiness"</span>,</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">tempo         =</span> <span class="st">"Tempo"</span>,</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">valence       =</span> <span class="st">"Valence"</span>,</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">duration_min  =</span> <span class="st">"Duration"</span>,</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode          =</span> <span class="st">"Mode"</span>,</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">key           =</span> <span class="st">"Key"</span>,</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">explicit      =</span> <span class="st">"Explicit"</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>pretty_x <span class="ot">&lt;-</span> <span class="fu">unname</span>(label_map[vars_ord])        <span class="co"># left-to-right; target first</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>pretty_y <span class="ot">&lt;-</span> <span class="fu">rev</span>(pretty_x)                      <span class="co"># top-to-bottom with target at top</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Long data for ggplot ----</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>cor_long <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.table</span>(cor_mat))</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(cor_long) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>, <span class="st">"r"</span>)</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>cor_long <span class="ot">&lt;-</span> cor_long <span class="sc">%&gt;%</span></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_lab =</span> <span class="fu">factor</span>(label_map[<span class="fu">as.character</span>(row)], <span class="at">levels =</span> pretty_y),</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_lab =</span> <span class="fu">factor</span>(label_map[<span class="fu">as.character</span>(col)], <span class="at">levels =</span> pretty_x),</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># white text on strong colors, black otherwise</span></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">txt_col =</span> <span class="fu">ifelse</span>(<span class="fu">abs</span>(r) <span class="sc">&gt;=</span> <span class="fl">0.5</span>, <span class="st">"white"</span>, <span class="st">"black"</span>),</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">r_lab   =</span> <span class="fu">sprintf</span>(<span class="st">"%.2f"</span>, r)</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Plot ----</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>p_corr <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cor_long, <span class="fu">aes</span>(<span class="at">x =</span> col_lab, <span class="at">y =</span> row_lab, <span class="at">fill =</span> r)) <span class="sc">+</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> r_lab, <span class="at">color =</span> txt_col), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_identity</span>(<span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">midpoint =</span> <span class="dv">0</span>,</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>                       <span class="at">low =</span> <span class="st">"#2166ac"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"#b2182b"</span>,</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>                       <span class="at">name =</span> <span class="st">"r"</span>) <span class="sc">+</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation Heatmap: Audio Features &amp; Chart Score"</span>,</span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid  =</span> <span class="fu">element_blank</span>()</span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="billboard_spotify_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Danceability, Duration, and Loudness</strong> are the audio features most <strong>positively correlated with chart_score</strong>, with correlations of 0.07, 0.04, and 0.04, respectively. However, it is important to note how <strong>small</strong> these correlations are. On the negative side, a simple correlation shows that <strong>acousticness, instrumentalness</strong>, and a song being <strong>explicit</strong>, <strong>negatively impact Billboard chart success</strong>.</p>
</blockquote>
</section>
<section id="linear-model" class="level3">
<h3 class="anchored" data-anchor-id="linear-model">Linear Model</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">############### LINEAR MODEL / FEATURE IMPORTANCES</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Model prep: z-score numeric features</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>songs_model <span class="ot">&lt;-</span> songs_final <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(audio_feats), scale))</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit model </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>form <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">"chart_score ~"</span>, <span class="fu">paste</span>(audio_feats, <span class="at">collapse =</span> <span class="st">" + "</span>)))</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>m_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(form, <span class="at">data =</span> songs_model)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy coefficients + 95% CI</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>coefs <span class="ot">&lt;-</span> <span class="fu">tidy</span>(m_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">%in%</span> audio_feats) <span class="sc">%&gt;%</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">term =</span> <span class="fu">gsub</span>(<span class="st">"_"</span>, <span class="st">" "</span>, term),</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">importance =</span> <span class="fu">abs</span>(estimate),</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">sign =</span> <span class="fu">ifelse</span>(estimate <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">"Positive"</span>, <span class="st">"Negative"</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(importance))</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Bar chart: absolute standardized effects</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>p_imp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(coefs, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(term, importance), <span class="at">y =</span> importance, <span class="at">fill =</span> sign)) <span class="sc">+</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Feature Importance for Chart Score (Linear Model)"</span>,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Audio feature (standardized)"</span>, <span class="at">y =</span> <span class="st">"Absolute effect size"</span>) <span class="sc">+</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Positive"</span><span class="ot">=</span><span class="st">"#1b9e77"</span>,<span class="st">"Negative"</span><span class="ot">=</span><span class="st">"#d95f02"</span>)) <span class="sc">+</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="billboard_spotify_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Going a step further from correlation, I employ a simple linear regression model to see audio feature associations with chart score. Like the correlations inferred, <strong>danceability, loudness, and duration</strong> are the most <strong>positively associated with chart success</strong>. <strong>Acousticness, energy, and explicit</strong> lyrics are <strong>negative predictors</strong> for Billboard success. However, it is important to note that these effects are modest. Audio features have a <strong>statistically real</strong> but <strong>small link</strong> to <strong>chart success</strong>, as shown by the <strong>0.02 Adjusted R-squared</strong> for the regression. Even though certain audio features may be better than others at influencing popularity, overall, <strong>popularity largely depends on non-audio factors like artist profile, release timing, and even record-label influence.</strong></p>
</blockquote>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/adesina923\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>