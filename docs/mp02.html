<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="adesina923">

<title>Mini-Project 02 - Making Backyards Affordable for All – STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea1d7ac60288e0f1efdbc993fd8432ae.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-339e78669bd22224b7cb5e9437fe940b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Mini Project 0</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp01.html"> 
<span class="menu-text">Mini Project 1</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./mp02.html" aria-current="page"> 
<span class="menu-text">Mini Project 2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mp03.html"> 
<span class="menu-text">Mini Project 3</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Mini-Project 02 - Making Backyards Affordable for All</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>adesina923 </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
The downloaded binary packages are in
    /var/folders/0x/_1vjwvkx4vs1_9zcmlm06xzr0000gn/T//RtmpXvYkAc/downloaded_packages</code></pre>
</div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This project explores how housing costs, household resources, and new construction interact across U.S. Core-Based Statistical areas (CBSAs). In today’s political climate, housing is a big talking-point, and many politicians base a large part of their campaign addressing how they plan to fix the housing crisis in their constituency. I intend to identify areas that are doing well and poorly on the housing front, especially as it related to the rent burden and the housing growth in these areas.</p>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>An early exploration of the available data yielded interesting results.</p>
<ol type="1">
<li><p><strong>Houston-The Woodlands-Sugar Land, TX Metro Area</strong> permitted the largest number of new housing units in the decade from 2010 to 2019 with <strong>482,075</strong> total permits.</p></li>
<li><p><strong>Albuquerque, NM</strong>, permitted its most new housing units in <strong>2021</strong> with <strong>4,021</strong> units. Note that pandemic-era forces such as record-low mortgage rates line up with a 2021 permitting spike.</p></li>
<li><p><strong>DC</strong> had the highest average individual income in 2015 at <strong>$33,232.88 per year</strong>.</p></li>
<li><p>The last year that the <strong>NYC</strong> Core-Based Statistical Area (CBSA) had the most data scientists was <strong>2015</strong> with a total of <strong>18,922</strong>.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-5e2bd91b63e966b5465b" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-5e2bd91b63e966b5465b">{"x":{"filter":"none","vertical":false,"caption":"<caption>Core-Based Statistical Areas with the Most Data Scientists Yearly (2009-2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14"],["New York-Newark-Jersey City, NY-NJ Metro Area","Dallas-Fort Worth-Arlington, TX Metro Area","Dallas-Fort Worth-Arlington, TX Metro Area","New York-Newark-Jersey City, NY-NJ Metro Area","New York-Newark-Jersey City, NY-NJ Metro Area","New York-Newark-Jersey City, NY-NJ Metro Area","New York-Newark-Jersey City, NY-NJ Metro Area","San Francisco-Oakland-Fremont, CA Metro Area","San Francisco-Oakland-Fremont, CA Metro Area","San Francisco-Oakland-Fremont, CA Metro Area","San Francisco-Oakland-Fremont, CA Metro Area","Atlanta-Sandy Springs-Roswell, GA Metro Area","San Francisco-Oakland-Fremont, CA Metro Area","San Francisco-Oakland-Fremont, CA Metro Area"],[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2021,2022,2023],["16,349","13,238","13,283","14,423","14,251","17,828","18,922","16,369","18,089","22,379","24,154","15,810","34,080","32,961"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>Year<\/th>\n      <th>Number of Analysts<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"Year","targets":2},{"name":"Number of Analysts","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote></li>
<li><p>In <strong>NYC</strong>, the fraction of total wages earned by people employed in the <strong>finance and insurance industries</strong> peaked in 2014 at 4.6%.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-f26feb074ea14ffb4867" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-f26feb074ea14ffb4867">{"x":{"filter":"none","vertical":false,"caption":"<caption>NYC Finace and Insurance Wages as % of Total NYC Wages<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14"],[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2021,2022,2023],["$2,194.2B","$2,366.5B","$2,452.9B","$2,543.6B","$2,663.0B","$2,587.1B","$3,008.2B","$3,038.3B","$3,177.0B","$3,196.7B","$3,617.2B","$3,636.4B","$4,104.6B","$4,160.1B"],["$94.5B","$103.6B","$109.0B","$107.8B","$107.3B","$119.1B","$119.4B","$118.6B","$130.1B","$128.7B","$132.7B","$156.1B","$159.2B","$160.8B"],["4.3%","4.4%","4.4%","4.2%","4.0%","4.6%","4.0%","3.9%","4.1%","4.0%","3.7%","4.3%","3.9%","3.9%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>Total NYC Wages<\/th>\n      <th>Total Finance Wages<\/th>\n      <th>% Finance<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Year","targets":1},{"name":"Total NYC Wages","targets":2},{"name":"Total Finance Wages","targets":3},{"name":"% Finance","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote></li>
</ol>
</section>
<section id="finding-relationships" class="level2">
<h2 class="anchored" data-anchor-id="finding-relationships">Finding Relationships</h2>
<p>Now, we seek to find relationships between certain variables that can shed light on rents and incomes, employment, and household size.</p>
<section id="rent-vs.-average-household-income-2009" class="level4">
<h4 class="anchored" data-anchor-id="rent-vs.-average-household-income-2009">Rent vs.&nbsp;Average Household Income (2009)</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>We see a clear positive linear relationship between average monthly rent and average household income in 2009.</p>
</blockquote>
</section>
<section id="total-employment-vs-total-employment-in-the-healthcare-social-services-sector" class="level4">
<h4 class="anchored" data-anchor-id="total-employment-vs-total-employment-in-the-healthcare-social-services-sector">Total Employment vs Total Employment in the Healthcare / Social Services Sector</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Using a log-scale to standardize, health care employment seems to conform to total employment, with health care employment gaining traction in later years as opposed to earleir years</p>
</blockquote>
</section>
<section id="evolution-of-average-household-size-over-time" class="level4">
<h4 class="anchored" data-anchor-id="evolution-of-average-household-size-over-time">Evolution of Average Household Size Over Time</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>When focusing on the 25 CBSAs with the highest average population from 2009-2023, average household size seems to slightly decrease across these 14 years.</p>
</blockquote>
</section>
</section>
<section id="building-indices" class="level2">
<h2 class="anchored" data-anchor-id="building-indices">Building Indices</h2>
<p>Now we build indices to represent the CBSAs that are experiencing high or low rent burden, and high or low housing growth. These indices will inform which areas are the most “YIMBY”, which impacts policy.</p>
<section id="rent-burden-index" class="level4">
<h4 class="anchored" data-anchor-id="rent-burden-index"><strong>Rent Burden Index</strong></h4>
<p>To build this index we found the rent burden for every CBSA and year as annual rent divided by household income. We then compared each CBSA-year to the national population-weighted average rent burden across all CBSAs and years. That gave us a standardized value where the national average is 100. To make the numbers easy to plot and compare, we scaled the standardized values across the whole dataset so that scores range from 0 - 100.</p>
<p>After doing this, we can easily highlight Metro Areas with the highest and lowest rent burdens.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-c74c847a18e1b2edcfea" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-c74c847a18e1b2edcfea">{"x":{"filter":"none","vertical":false,"caption":"<caption>Core-Based Statistical Areas (CBSAs) with the Highest and Lowest Rent Burden (2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["Clearlake, CA Micro Area","Aguadilla, PR Metro Area","Cape Coral-Fort Myers, FL Metro Area","Miami-Fort Lauderdale-West Palm Beach, FL Metro Area","Port St. Lucie, FL Metro Area","Ponce, PR Metro Area","Tampa-St. Petersburg-Clearwater, FL Metro Area","Key West-Key Largo, FL Micro Area","North Port-Bradenton-Sarasota, FL Metro Area","Ocala, FL Metro Area","Laconia, NH Micro Area","Manitowoc, WI Micro Area","Bismarck, ND Metro Area","Watertown-Fort Atkinson, WI Micro Area","Wisconsin Rapids-Marshfield, WI Micro Area","Jefferson City, MO Metro Area","Decatur, AL Metro Area","Talladega-Sylacauga, AL Micro Area","Mount Airy, NC Micro Area","Albertville, AL Micro Area"],["Highest Burden","Highest Burden","Highest Burden","Highest Burden","Highest Burden","Highest Burden","Highest Burden","Highest Burden","Highest Burden","Highest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden","Lowest Burden"],["$1,544","$548","$1,797","$1,914","$1,679","$502","$1,729","$2,091","$1,854","$1,365","$1,037","$752","$951","$953","$766","$792","$854","$728","$697","$724"],["$59,444","$21,290","$71,547","$76,271","$68,316","$20,978","$72,743","$88,870","$78,914","$58,606","$97,692","$68,297","$83,440","$82,864","$66,461","$68,629","$72,956","$61,514","$58,291","$60,298"],["31.2%","30.9%","30.1%","30.1%","29.5%","28.7%","28.5%","28.2%","28.2%","27.9%","12.7%","13.2%","13.7%","13.8%","13.8%","13.8%","14.0%","14.2%","14.3%","14.4%"],[72.90000000000001,71.8,68.90000000000001,68.8,66.40000000000001,63.4,62.6,61.5,61.4,60.4,1.6,3.5,5.3,5.8,5.9,5.9,6.7,7.3,7.9,8.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>Rent Burden Category<\/th>\n      <th>Monthly Rent<\/th>\n      <th>Annual Income<\/th>\n      <th>Rent Burden<\/th>\n      <th>Index<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":20,"columnDefs":[{"className":"dt-right","targets":6},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"Rent Burden Category","targets":2},{"name":"Monthly Rent","targets":3},{"name":"Annual Income","targets":4},{"name":"Rent Burden","targets":5},{"name":"Index","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<blockquote class="blockquote">
<p>California and Florida stand out as the two states with areas in which rent burden was the highest in 2023. Clearlake, CA boasts the highest rent burden and index (31.2% and 72.9 respectively), while Florida metro areas make up 7 of the top 10. On the opposite side of the spectrum, Laconia, NH had the lowest rent burden and idnex in 2023 (12.7% and 1.6 respectively), with states like Wisconsin and Alabama making up a majority of the bottom 10.</p>
</blockquote>
<p>We can now examine how the rent burden in NYC has changed over the years.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-63b7449a5b0718a5ad03" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-63b7449a5b0718a5ad03">{"x":{"filter":"none","vertical":false,"caption":"<caption>New York Metropolitan Area Rent Burden (2009-2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14"],[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2021,2022,2023],["$1,125","$1,150","$1,187","$1,209","$1,237","$1,281","$1,308","$1,346","$1,379","$1,434","$1,482","$1,600","$1,685","$1,764"],["$62,887","$61,927","$62,322","$63,982","$65,786","$67,066","$68,743","$71,897","$75,368","$78,478","$83,160","$84,409","$91,562","$95,220"],["21.5%","22.3%","22.9%","22.7%","22.6%","22.9%","22.8%","22.5%","22.0%","21.9%","21.4%","22.7%","22.1%","22.2%"],[35.4,38.5,40.7,40,39.6,41,40.6,39.2,37.3,37.1,35.1,40.3,37.8,38.3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>Monthly Rent<\/th>\n      <th>Annual Income<\/th>\n      <th>Rent Burden<\/th>\n      <th>Index<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Year","targets":1},{"name":"Monthly Rent","targets":2},{"name":"Annual Income","targets":3},{"name":"Rent Burden","targets":4},{"name":"Index","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<blockquote class="blockquote">
<p>Rent burden in the New York Metropolitan area was highest in the early-to-mid 2010s - it first rises in 2011 (22.9%, Index = 40.7) and reaches its peak in 2014, with the index reaching its top value of 41, despite a rise in annual income. That checks out with the post recession pattern of rents recovering faster than incomes. 2021 saw a jump in burden as well, which could possibly be explained by the pandemic/early-reopening period, as rents trended upwards at a faster rate than incomes.</p>
</blockquote>
</section>
<section id="housing-growth-index-instantaneous" class="level4">
<h4 class="anchored" data-anchor-id="housing-growth-index-instantaneous"><strong>Housing Growth Index (Instantaneous)</strong></h4>
<p>We now build an index based on housing growth. This index depends on the absolute population of a CBSA and the number of new housing units permitted that year. This shows us the metros that were “actively building in the moment.” After finding the number of new housing permits per 1,000 current residents, we standardize those values across all metros and years, center and re-scale them on the overall average, and clamp the scores to a 0-100 range. The top 10 CBSAs in 2023 based on this index are as follows:</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-355ca653f72516a03659" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-355ca653f72516a03659">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 10 Core Based Statistic Areas (CBSAs) by Instantaneous Housing Growth (2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["Myrtle Beach-Conway-North Myrtle Beach, SC Metro Area","Salisbury, MD Metro Area","Punta Gorda, FL Metro Area","Crestview-Fort Walton Beach-Destin, FL Metro Area","North Port-Bradenton-Sarasota, FL Metro Area","Daphne-Fairhope-Foley, AL Metro Area","Sherman-Denison, TX Metro Area","Cape Coral-Fort Myers, FL Metro Area","Austin-Round Rock-San Marcos, TX Metro Area","Lakeland-Winter Haven, FL Metro Area"],[33.1,37.7,21.5,18.4,17.5,17.2,16.7,16.2,15.7,15.3],[100,100,99.09999999999999,90.2,87.8,86.90000000000001,85.3,84.2,82.5,81.40000000000001]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>New Permits per 1k Residents<\/th>\n      <th>Instantaneous Index<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"New Permits per 1k Residents","targets":2},{"name":"Instantaneous Index","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<blockquote class="blockquote">
<p>Myrtle Beach and Salisbury sit at the very top of this instantaneous housing-growth index, meaning that in 2023 they permitted way more homes per 1,000 current residents than the typical U.S. CBSA. The Florida cluster (Punta Gorda, North Port–Bradenton–Sarasota, Cape Coral–Fort Myers, Lakeland–Winter Haven) exemplifies strong in-migration and pro-growth local politics, which makes it easier to turn population pressure into actual permits in a single year. These CBSAs are growing and have room (or rules) to build. For finding the “YIMBY-est” areas, these are the metros that are visibly adding supply, but we still have to check whether rent burden actually eased and whether 5-year population growth was strong.</p>
</blockquote>
</section>
<section id="housing-growth-index-rate-based" class="level4">
<h4 class="anchored" data-anchor-id="housing-growth-index-rate-based"><strong>Housing Growth Index (Rate-Based)</strong></h4>
<p>This rate-based index seeks to find if CBSAs built enough for the new people they received by looking back 5 years for each CBSA to measure 5-year population growth. The index as a function of population growth over a 5-year period effectively shows if metros added homes relative to how many new residents arrived.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-e53e84d9115cea6db51d" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-e53e84d9115cea6db51d">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 10 Core Based Statistic Areas (CBSAs) by Rate-Based Hosuing Growth (2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["Springfield, OH Metro Area","Urban Honolulu, HI Metro Area","Dalton, GA Metro Area","Brunswick-St. Simons, GA Metro Area","Anchorage, AK Metro Area","Racine-Mount Pleasant, WI Metro Area","Bridgeport-Stamford-Danbury, CT Metro Area","Miami-Fort Lauderdale-West Palm Beach, FL Metro Area","Hickory-Lenoir-Morganton, NC Metro Area","Brownsville-Harlingen, TX Metro Area"],[4.1,2.4,1.8,1.3,1.1,1,0.9,0.9,0.7,0.7],[71,62.1,58.3,55.6,54.5,53.9,53.7,53.4,52.3,52.2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>New Permits per New Resident (5-yr Growth)<\/th>\n      <th>Rate Based Index<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"New Permits per New Resident (5-yr Growth)","targets":2},{"name":"Rate Based Index","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<blockquote class="blockquote">
<p>Springfield, OH leads this index, as it didn’t add a huge number of residents over 2019–2023, but it still permitted a meaningful number of units. Urban Honolulu is interesting for the opposite reason: it’s supply-constrained and every added unit “counts” more, so it looks good on a growth-aware metric. Big, high-demand places like Miami–Fort Lauderdale showing up exemplify expensive, growing metros where permitting has at least tried to keep pace with population pressure.</p>
</blockquote>
</section>
<section id="composite-index-rate-based" class="level4">
<h4 class="anchored" data-anchor-id="composite-index-rate-based"><strong>Composite Index (Rate-Based)</strong></h4>
<p>Now we combine the Instantaenous index and Rate-Based index into one Composite index, which takes into account both indexes, giving a little more weight to the Rate-Based index. We can analyse the CBSAs that scored high and low on this index.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-e413faa820e605acf2cf" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-e413faa820e605acf2cf">{"x":{"filter":"none","vertical":false,"caption":"<caption>Core-Based Statistical Areas (CBSAs) with the Highest and Lowest Composite Scores (2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["Punta Gorda, FL Metro Area","Crestview-Fort Walton Beach-Destin, FL Metro Area","North Port-Bradenton-Sarasota, FL Metro Area","Daphne-Fairhope-Foley, AL Metro Area","Sherman-Denison, TX Metro Area","Cape Coral-Fort Myers, FL Metro Area","Austin-Round Rock-San Marcos, TX Metro Area","Burlington, NC Metro Area","Lakeland-Winter Haven, FL Metro Area","St. George, UT Metro Area","Morgantown, WV Metro Area","Enid, OK Metro Area","Anniston-Oxford, AL Metro Area","Huntington-Ashland, WV-KY-OH Metro Area","Reading, PA Metro Area","Atlantic City-Hammonton, NJ Metro Area","Hot Springs, AR Metro Area","Terre Haute, IN Metro Area","Scranton--Wilkes-Barre, PA Metro Area","Hattiesburg, MS Metro Area"],["High Composite Score","High Composite Score","High Composite Score","High Composite Score","High Composite Score","High Composite Score","High Composite Score","High Composite Score","High Composite Score","High Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score","Low Composite Score"],[99.09999999999999,90.2,87.8,86.90000000000001,85.3,84.2,82.5,81.3,81.40000000000001,77.59999999999999,38.1,38.2,39.3,40,40.1,40.7,40.2,40.2,40.7,40.9],[49.6,49.5,49.4,49.1,49.4,49.3,49.1,49.5,49.1,49,48.6,48.7,48.8,48.7,48.7,48.6,49,49,48.8,48.6],[69.40000000000001,65.8,64.7,64.3,63.8,63.3,62.5,62.2,62,60.4,44.4,44.5,45,45.2,45.2,45.4,45.5,45.5,45.5,45.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>Category<\/th>\n      <th>Instantaneous Index<\/th>\n      <th>Rate Based Index<\/th>\n      <th>Composite Index<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"Category","targets":2},{"name":"Instantaneous Index","targets":3},{"name":"Rate Based Index","targets":4},{"name":"Composite Index","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<p>Metros near the top exemplify areas that are not just pumping out permits per resident, but are doing it in a way that isn’t wildly out of step with recent population gains. On the flip side, the low-composite metros represent places that are basically just matching a sleepy or stagnant population rather than using housing to enable more growth.</p>
</section>
</section>
<section id="indentifying-yimby-and-nimby-cities" class="level2">
<h2 class="anchored" data-anchor-id="indentifying-yimby-and-nimby-cities">Indentifying YIMBY and NIMBY Cities</h2>
<p>We identify YIMBY cities according to the following criteria:</p>
<ul>
<li>high rent burden in the early part of the study period;</li>
<li>decrease in rent burden over the study period;</li>
<li>population growth over the study period;</li>
<li>above-average housing growth during the study period.</li>
</ul>
<p>We score metros that meet this criterion on how well they met it. This gives us our 10 “YIMBY-est” cities.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-531ad8f5b0d770a8a2be" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-531ad8f5b0d770a8a2be">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 10 'YIMBY-est' CBSAs<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["Ocean City, NJ Metro Area","College Station-Bryan, TX Metro Area","Jacksonville, NC Metro Area","Yuma, AZ Metro Area","Gulfport-Biloxi, MS Metro Area","Lake Havasu City-Kingman, AZ Metro Area","Punta Gorda, FL Metro Area","Redding, CA Metro Area","Valdosta, GA Metro Area","Laredo, TX Metro Area"],[0.621,0.615,0.606,0.606,0.581,0.576,0.574,0.569,0.5649999999999999,0.5629999999999999]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Name<\/th>\n      <th>Yimby Score<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Name","targets":1},{"name":"Yimby Score","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<p>The cities that do not meet all 4 requirements are ranked on how well they meet the opposite of the criteria, producing the 10 “NIMBY-est” cities.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-ae2525df6d0331f71085" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-ae2525df6d0331f71085">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 10 'NIMBY-est' CBSAs<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["Oxnard-Thousand Oaks-Ventura, CA Metro Area","Boulder, CO Metro Area","Salinas, CA Metro Area","Miami-Fort Lauderdale-Pompano Beach, FL Metro Area","Napa, CA Metro Area","Cape Coral-Fort Myers, FL Metro Area","Merced, CA Metro Area","North Port-Bradenton-Sarasota, FL Metro Area","Colorado Springs, CO Metro Area","Farmington, NM Metro Area"],[0.711,0.711,0.702,0.6889999999999999,0.6850000000000001,0.6820000000000001,0.681,0.674,0.673,0.668]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Name<\/th>\n      <th>Nimby Score<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Name","targets":1},{"name":"Nimby Score","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
<p>Now we can see if there is a difference between YIMBY cities and non-YIMBY cities when comparing rent burden changes and average housing growth.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>The red points represent cities that met all the criteria to be YIMBY cities. The visualization clearly shows that these cities experienced an allevitaion in rent burden overtime, and added more housing as defined by our Composite Index.</p>
</blockquote>
<p>When we average the rent burden over time of our top YIMBY and NIMBY cities, the difference is clear.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Our top YIMBY cities effectively lowered rent burden, while our top NIMBY cities did not. Infact, rent burden increased in these areas.</p>
</blockquote>
</section>
<section id="policy-brief-enhanced-housing-laws-for-increased-building" class="level2">
<h2 class="anchored" data-anchor-id="policy-brief-enhanced-housing-laws-for-increased-building">Policy Brief: Enhanced Housing Laws for Increased Building</h2>
<section id="overview" class="level4">
<h4 class="anchored" data-anchor-id="overview">Overview</h4>
<p>America’s housing crisis has been at the center of political discussions. With rising concerns over immigration, inflation, and layoffs, just to name a few, it is our duty as a nation to protect citizens from dealing with the pressures of housing insecurity.</p>
<p><strong>The Metro-Housing Acceleration Initiative (MHAI)</strong> is a federal program that incentivizes local municipalities that adopt pro-housing policies. This initiative will make it easier for such municipalities to permit new housing, allowing for a boost in municipality economy. In response, the government will reward grants to municipalities who not only adopt these new pro-housing policies, but exemplify success in doing so.</p>
</section>
<section id="sponsors" class="level4">
<h4 class="anchored" data-anchor-id="sponsors">Sponsors</h4>
<p><strong>Primary Sponsor:</strong> Representative from <strong>Gulfport-Biloxi, MS Metro Area</strong>. With a low rent burden index of 32.2, and a high YIMBY score of .581, <strong>Gulfport-Biloxi</strong> represents an area that has built housing units at a rate commensurate to its population growth.</p>
<p><strong>Co-Sponsor:</strong> Representative from <strong>Miami-Fort Lauderdale-Pompano Beach, FL Metro Area.</strong> With a high rent burden index of 68.8 and a NIMBY score of .689, <strong>Miami-Fort Lauderdale-Pompano Beach</strong> is a clear example of a large, high-demand market where housing supply has not kept pace with population and job growth, making it an ideal “needs-based” co-sponsor to argue for federal pro-housing incentives.</p>
</section>
<section id="occupations-the-initiative-will-benefit" class="level4">
<h4 class="anchored" data-anchor-id="occupations-the-initiative-will-benefit">Occupations the Initiative will Benefit</h4>
<p><strong>Admin, support &amp; waste mgmt</strong></p>
<p>This industry made up a significant portion of both the Gulfport-Biloxi, MS and Miami-Fort Lauderdale, FL workforces in 2023. This initiative strives to protect workers in this industry by keeping rents from eating up their paychecks, so that modest-wage service and facilities staff can actually live near the jobs they support, rather than being pushed farther out as housing tightens.</p>
<p><strong>Accommodation &amp; food services</strong> This sector is sensitive to high housing costs since restaurants, hotels, and tourism businesses need a large local workforce that can afford to live close to the popular locations within the area. By pushing cities to add more units, the initiative helps employers in both CBSAs stabilize staffing and helps lower-wage hospitality workers keep more of their income for transportation, childcare, and savings instead of rent.</p>
<blockquote class="blockquote">
<p></p><div class="datatables html-widget html-fill-item" id="htmlwidget-51fbadcb2de9079b98ed" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-51fbadcb2de9079b98ed">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["Admin, support &amp; waste mgmt","Accommodation &amp; food services"],["23,747","90,120"],["  843,433","1,125,039"],["$41,203","$24,892"],["$57,860","$36,338"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Industry<\/th>\n      <th>Employment_Gulfport–Biloxi, MS<\/th>\n      <th>Employment_Miami–Fort Lauderdale–West Palm Beach, FL<\/th>\n      <th>Avg_Wage_Gulfport–Biloxi, MS<\/th>\n      <th>Avg_Wage_Miami–Fort Lauderdale–West Palm Beach, FL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Industry","targets":1},{"name":"Employment_Gulfport–Biloxi, MS","targets":2},{"name":"Employment_Miami–Fort Lauderdale–West Palm Beach, FL","targets":3},{"name":"Avg_Wage_Gulfport–Biloxi, MS","targets":4},{"name":"Avg_Wage_Miami–Fort Lauderdale–West Palm Beach, FL","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p></p>
</blockquote>
</section>
<section id="metrics-to-analyze" class="level4">
<h4 class="anchored" data-anchor-id="metrics-to-analyze">Metrics to Analyze</h4>
<ul>
<li><p><strong>Rent Burden</strong> measures “housing stress”. It starts from calculating the percentage of annual household income that goes to rent, and comparing that number for every CBSA-year to the national, population average across all CBSA’s in all years. After scaling so that the metric ranges from 0 - 100, a low rent burden indicates that housing is in a good spot, with supply keeping costs in check. A high rent burden means that housing is tight and families are using too much income on rent.</p></li>
<li><p><strong>Composite Housing Growth Index</strong> measures if a CBSA is actually building. It combines a metric that rewards places that are adding housing in the moment, and a metric that rewards places that are building in proportion to population growth. A high composite housing growth index represents an area that is issuing permits because population is growing. A low composite housing growth index means that an area is not building enough to compensate for a growing population.</p></li>
</ul>
</section>
<section id="why-this-initiative-matters" class="level4">
<h4 class="anchored" data-anchor-id="why-this-initiative-matters">Why this Initiative Matters</h4>
<p>The Metro-Housing Acceleration Initiative (MHAI) gives Gulfport-Biloxi a way to keep doing what’s already working — steady building, low rent burden — and get federal dollars to lock that in. At the same time, it gives Miami–Fort Lauderdale–Pompano Beach a path to catch up: federal incentives to make it easier to permit, clear metrics to show progress, and political cover to tell residents “we’re building so your rent doesn’t keep rising.” Because the program is tied to transparent measures — <strong>Rent Burden</strong> (are people paying too much?) and <strong>Composite Housing Growth Index</strong> (are we actually adding homes?) — Congress can target money to places that both need relief and use the tools. Everybody wins: workers stay closer to jobs, employers get a stabler labor pool, and fast-growing metros don’t have to choose between growth and affordability.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/adesina923\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>